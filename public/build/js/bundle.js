function responsiveCalendar(){var e=$(this),t=$("#id_meliscalendar_tool .row .col-md-4");$(window).width()<=991?t.insertAfter(e.parent().find("#id_meliscalendar_tool .row .col-md-8")):t.insertBefore(e.parent().find("#id_meliscalendar_tool .row .col-md-8"))}!function(e,t){function n(t){e.extend(!0,_e,t)}function a(n,a,c){function d(e){re?p()&&(T(),C(e)):u()}function u(){oe=a.theme?"ui":"fc",n.addClass("fc"),a.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),a.theme&&n.addClass("ui-widget"),re=e("<div class='fc-content' style='position:relative'/>").prependTo(n),ne=new r(te,a),ae=ne.render(),ae&&n.prepend(ae),y(a.defaultView),a.handleWindowResize&&e(window).resize(S),m()||v()}function v(){setTimeout(function(){!ie.start&&m()&&_()},0)}function h(){ie&&(ee("viewDestroy",ie,ie,ie.element),ie.triggerEventDestroy()),e(window).unbind("resize",S),ne.destroy(),re.remove(),n.removeClass("fc fc-rtl ui-widget")}function p(){return n.is(":visible")}function m(){return e("body").is(":visible")}function y(e){ie&&e==ie.name||D(e)}function D(t){he++,ie&&(ee("viewDestroy",ie,ie,ie.element),Y(),ie.triggerEventDestroy(),U(),ie.element.remove(),ne.deactivateButton(ie.name)),ne.activateButton(t),ie=new Te[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(re),te),_(),Z(),he--}function _(e){(!ie.start||e||ie.start>ge||ge>=ie.end)&&p()&&C(e)}function C(e){he++,ie.start&&(ee("viewDestroy",ie,ie,ie.element),Y(),F()),U(),ie.render(ge,e||0),E(),Z(),(ie.afterRender||A)(),W(),L(),ee("viewRender",ie,ie,ie.element),ie.trigger("viewDisplay",fe),he--,N()}function M(){p()&&(Y(),F(),T(),E(),H())}function T(){se=a.contentHeight?a.contentHeight:a.height?a.height-(ae?ae.height():0)-R(re):Math.round(re.width()/Math.max(a.aspectRatio,.5))}function E(){se===t&&T(),he++,ie.setHeight(se),ie.setWidth(re.width()),he--,le=n.outerWidth()}function S(){if(!he)if(ie.start){var e=++ve;setTimeout(function(){e==ve&&!he&&p()&&le!=(le=n.outerWidth())&&(he++,M(),ie.trigger("windowResize",fe),he--)},200)}else v()}function x(){F(),z()}function k(e){F(),H(e)}function H(e){p()&&(ie.setEventData(pe),ie.renderEvents(pe,e),ie.trigger("eventAfterAllRender"))}function F(){ie.triggerEventDestroy(),ie.clearEvents(),ie.clearEventData()}function N(){!a.lazyFetching||de(ie.visStart,ie.visEnd)?z():H()}function z(){ue(ie.visStart,ie.visEnd)}function O(e){pe=e,H()}function $(e){k(e)}function W(){ne.updateTitle(ie.title)}function L(){var e=new Date;e>=ie.start&&ie.end>e?ne.disableButton("today"):ne.enableButton("today")}function j(e,n,a){ie.select(e,n,a===t||a)}function Y(){ie&&ie.unselect()}function P(){_(-1)}function I(){_(1)}function q(){i(ge,-1),_()}function B(){i(ge,1),_()}function V(){ge=new Date,_()}function X(e,t,n){e instanceof Date?ge=f(e):g(ge,e,t,n),_()}function J(e,n,a){e!==t&&i(ge,e),n!==t&&l(ge,n),a!==t&&s(ge,a),_()}function K(){return f(ge)}function U(){re.css({width:"100%",height:re.height(),overflow:"hidden"})}function Z(){re.css({width:"",height:"",overflow:""})}function G(){return ie}function Q(e,n){return n===t?a[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(a[e]=n,M()),t)}function ee(e,n){return a[e]?a[e].apply(n||fe,Array.prototype.slice.call(arguments,2)):t}var te=this;te.options=a,te.render=d,te.destroy=h,te.refetchEvents=x,te.reportEvents=O,te.reportEventChange=$,te.rerenderEvents=k,te.changeView=y,te.select=j,te.unselect=Y,te.prev=P,te.next=I,te.prevYear=q,te.nextYear=B,te.today=V,te.gotoDate=X,te.incrementDate=J,te.formatDate=function(e,t){return w(e,t,a)},te.formatDates=function(e,t,n){return b(e,t,n,a)},te.getDate=K,te.getView=G,te.option=Q,te.trigger=ee,o.call(te,a,c);var ne,ae,re,oe,ie,le,se,ce,de=te.isFetchNeeded,ue=te.fetchEvents,fe=n[0],ve=0,he=0,ge=new Date,pe=[];g(ge,a.year,a.month,a.date),a.droppable&&e(document).bind("dragstart",function(t,n){var r=t.target,o=e(r);if(!o.parents(".fc").length){var i=a.dropAccept;(e.isFunction(i)?i.call(r,o):o.is(i))&&(ce=r,ie.dragStart(ce,t,n))}}).bind("dragstop",function(e,t){ce&&(ie.dragStop(ce,e,t),ce=null)})}function r(n,a){function r(){return v=a.theme?"ui":"fc",a.header?h=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(i("left")).append(i("center")).append(i("right"))):t}function o(){h.remove()}function i(t){var r=e("<td class='fc-header-"+t+"'/>"),o=a.header[t];return o&&e.each(o.split(" "),function(t){t>0&&r.append("<span class='fc-header-space'/>");var o;e.each(this.split(","),function(t,i){if("title"==i)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(v+"-corner-right"),o=null;else{var l;if(n[i]?l=n[i]:Te[i]&&(l=function(){d.removeClass(v+"-state-hover"),n.changeView(i)}),l){var s=a.theme?L(a.buttonIcons,i):null,c=L(a.buttonText,i),d=e("<span class='fc-button fc-button-"+i+" "+v+"-state-default'>"+(s?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+s+"'/></span>":c)+"</span>").click(function(){d.hasClass(v+"-state-disabled")||l()}).mousedown(function(){d.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-down")}).mouseup(function(){d.removeClass(v+"-state-down")}).hover(function(){d.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-hover")},function(){d.removeClass(v+"-state-hover").removeClass(v+"-state-down")}).appendTo(r);Y(d),o||d.addClass(v+"-corner-left"),o=d}}}),o&&o.addClass(v+"-corner-right")}),r}function l(e){h.find("h2").html(e)}function s(e){h.find("span.fc-button-"+e).addClass(v+"-state-active")}function c(e){h.find("span.fc-button-"+e).removeClass(v+"-state-active")}function d(e){h.find("span.fc-button-"+e).addClass(v+"-state-disabled")}function u(e){h.find("span.fc-button-"+e).removeClass(v+"-state-disabled")}var f=this;f.render=r,f.destroy=o,f.updateTitle=l,f.activateButton=s,f.deactivateButton=c,f.disableButton=d,f.enableButton=u;var v,h=e([])}function o(n,a){function r(e,t){return!M||M>e||t>T}function o(e,t){M=e,T=t,z=[];var n=++R,a=H.length;F=a;for(var r=0;a>r;r++)i(H[r],n)}function i(t,a){l(t,function(r){if(a==R){if(r){n.eventDataTransform&&(r=e.map(r,n.eventDataTransform)),t.eventDataTransform&&(r=e.map(r,t.eventDataTransform));for(var o=0;r.length>o;o++)r[o].source=t,w(r[o]);z=z.concat(r)}--F||x(z)}})}function l(a,r){var o,i,s=Me.sourceFetchers;for(o=0;s.length>o;o++){if(!0===(i=s[o](a,M,T,r)))return;if("object"==typeof i)return l(i,r),t}var c=a.events;if(c)e.isFunction(c)?(m(),c(f(M),f(T),function(e){r(e),y()})):e.isArray(c)?r(c):r();else{if(a.url){var d,u=a.success,v=a.error,h=a.complete;d=e.isFunction(a.data)?a.data():a.data;var g=e.extend({},d||{}),p=B(a.startParam,n.startParam),w=B(a.endParam,n.endParam);p&&(g[p]=Math.round(+M/1e3)),w&&(g[w]=Math.round(+T/1e3)),m(),e.ajax(e.extend({},Ee,a,{data:g,success:function(t){t=t||[];var n=q(u,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){q(v,this,arguments),r()},complete:function(){q(h,this,arguments),y()}}))}else r()}}function s(e){(e=c(e))&&(F++,i(e,R))}function c(n){return e.isFunction(n)||e.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(b(n),H.push(n),n):t}function d(t){H=e.grep(H,function(e){return!D(e,t)}),z=e.grep(z,function(e){return!D(e.source,t)}),x(z)}function u(e){var t,n,a=z.length,r=S().defaultEventEnd,o=e.start-e._start,i=e.end?e.end-(e._end||r(e)):0;for(t=0;a>t;t++)n=z[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+o),n.end=e.end?n.end?new Date(+n.end+i):new Date(+r(n)+i):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,w(n));w(e),x(z)}function v(e,t){w(e),e.source||(t&&(k.events.push(e),e.source=k),z.push(e)),x(z)}function h(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}z=e.grep(z,t,!0);for(var a=0;H.length>a;a++)e.isArray(H[a].events)&&(H[a].events=e.grep(H[a].events,t,!0))}else{z=[];for(var a=0;H.length>a;a++)e.isArray(H[a].events)&&(H[a].events=[])}x(z)}function g(t){return e.isFunction(t)?e.grep(z,t):t?(t+="",e.grep(z,function(e){return e._id==t})):z}function m(){N++||E("loading",null,!0,S())}function y(){--N||E("loading",null,!1,S())}function w(e){var a=e.source||{},r=B(a.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+Se++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=f(e.start=p(e.start,r)),e.end=p(e.end,r),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?f(e.end):null,e.allDay===t&&(e.allDay=B(a.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function b(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Me.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}function D(e,t){return e&&t&&_(e)==_(t)}function _(e){return("object"==typeof e?e.events||e.url:"")||e}var C=this;C.isFetchNeeded=r,C.fetchEvents=o,C.addEventSource=s,C.removeEventSource=d,C.updateEvent=u,C.renderEvent=v,C.removeEvents=h,C.clientEvents=g,C.normalizeEvent=w;for(var M,T,E=C.trigger,S=C.getView,x=C.reportEvents,k={events:[]},H=[k],R=0,F=0,N=0,z=[],A=0;a.length>A;A++)c(a[A])}function i(e,t,n){return e.setFullYear(e.getFullYear()+t),n||u(e),e}function l(e,t,n){if(+e){var a=e.getMonth()+t,r=f(e);for(r.setDate(1),r.setMonth(a),e.setMonth(a),n||u(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(r>e?1:-1))}return e}function s(e,t,n){if(+e){var a=e.getDate()+t,r=f(e);r.setHours(9),r.setDate(a),e.setDate(a),n||u(e),c(e,r)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*He)}function d(e,t){return e.setMinutes(e.getMinutes()+t),e}function u(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function f(e,t){return t?u(new Date(+e)):new Date(+e)}function v(){var e,t=0;do{e=new Date(1970,t++,1)}while(e.getHours());return e}function h(e,t){return Math.round((f(e,!0)-f(t,!0))/ke)}function g(e,n,a,r){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),a!==t&&a!=e.getMonth()&&(e.setDate(1),e.setMonth(a)),r!==t&&e.setDate(r)}function p(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),m(e,n)||(e?new Date(e):null)):null}function m(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var a=new Date(n[1],0,1);if(t||!n[13]){var r=new Date(n[1],0,1,9,0);n[3]&&(a.setMonth(n[3]-1),r.setMonth(n[3]-1)),n[5]&&(a.setDate(n[5]),r.setDate(n[5])),c(a,r),n[7]&&a.setHours(n[7]),n[8]&&a.setMinutes(n[8]),n[10]&&a.setSeconds(n[10]),n[12]&&a.setMilliseconds(1e3*Number("0."+n[12])),c(a,r)}else if(a.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),a.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,a=new Date(+a+6e4*o)}return a}function y(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function w(e,t,n){return b(e,null,t,n)}function b(e,t,n,a){a=a||_e;var r,o,i,l,s=e,c=t,d=n.length,u="";for(r=0;d>r;r++)if("'"==(o=n.charAt(r))){for(i=r+1;d>i;i++)if("'"==n.charAt(i)){s&&(u+=i==r+1?"'":n.substring(r+1,i),r=i);break}}else if("("==o){for(i=r+1;d>i;i++)if(")"==n.charAt(i)){var f=w(s,n.substring(r+1,i),a);parseInt(f.replace(/\D/,""),10)&&(u+=f),r=i;break}}else if("["==o){for(i=r+1;d>i;i++)if("]"==n.charAt(i)){var v=n.substring(r+1,i),f=w(s,v,a);f!=w(c,v,a)&&(u+=f),r=i;break}}else if("{"==o)s=t,c=e;else if("}"==o)s=e,c=t;else{for(i=d;i>r;i--)if(l=Fe[n.substring(r,i)]){s&&(u+=l(s,a)),r=i-1;break}i==r&&s&&(u+=o)}return u}function D(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function _(e){return e.end?C(e.end,e.allDay):s(f(e.start),1)}function C(e,t){return e=f(e),t||e.getHours()||e.getMinutes()?s(e,1):u(e)}function M(n,a,r){n.unbind("mouseover").mouseover(function(n){for(var o,i,l,s=n.target;s!=this;)o=s,s=s.parentNode;(i=o._fci)!==t&&(o._fci=t,l=a[i],r(l.event,l.element,l),e(n.target).trigger(n)),n.stopPropagation()})}function T(t,n,a){for(var r,o=0;t.length>o;o++)r=e(t[o]),r.width(Math.max(0,n-S(r,a)))}function E(t,n,a){for(var r,o=0;t.length>o;o++)r=e(t[o]),r.height(Math.max(0,n-R(r,a)))}function S(e,t){return x(e)+H(e)+(t?k(e):0)}function x(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function k(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function H(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function R(e,t){return F(e)+z(e)+(t?N(e):0)}function F(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function N(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function z(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function A(){}function O(e,t){return e-t}function $(e){return Math.max.apply(Math,e)}function W(e){return(10>e?"0":"")+e}function L(e,n){if(e[n]!==t)return e[n];for(var a,r=n.split(/(?=[A-Z])/),o=r.length-1;o>=0;o--)if((a=e[r[o].toLowerCase()])!==t)return a;return e[""]}function j(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Y(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function P(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function I(e,t){var n=e.source||{},a=e.color,r=n.color,o=t("eventColor"),i=e.backgroundColor||a||n.backgroundColor||r||t("eventBackgroundColor")||o,l=e.borderColor||a||n.borderColor||r||t("eventBorderColor")||o,s=e.textColor||n.textColor||t("eventTextColor"),c=[];return i&&c.push("background-color:"+i),l&&c.push("border-color:"+l),s&&c.push("color:"+s),c.join(";")}function q(t,n,a){if(e.isFunction(t)&&(t=[t]),t){var r,o;for(r=0;t.length>r;r++)o=t[r].apply(n,a)||o;return o}}function B(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function V(e,t){function n(e,t){t&&(l(e,t),e.setDate(1));var n=r("firstDay"),u=f(e,!0);u.setDate(1);var v=l(f(u),1),g=f(u);s(g,-(g.getDay()-n+7)%7),i(g);var p=f(v);s(p,(7-p.getDay()+n)%7),i(p,-1,!0);var m=c(),y=Math.round(h(p,g)/7);"fixed"==r("weekMode")&&(s(p,7*(6-y)),y=6),a.title=d(u,r("titleFormat")),a.start=u,a.end=v,a.visStart=g,a.visEnd=p,o(y,m,!0)}var a=this;a.render=n,K.call(a,e,t,"month");var r=a.opt,o=a.renderBasic,i=a.skipHiddenDays,c=a.getCellsPerWeek,d=t.formatDate}function X(e,t){function n(e,t){t&&s(e,7*t);var n=s(f(e),-(e.getDay()-r("firstDay")+7)%7),d=s(f(n),7),u=f(n);i(u);var v=f(d);i(v,-1,!0);var h=l();a.start=n,a.end=d,a.visStart=u,a.visEnd=v,a.title=c(u,s(f(v),-1),r("titleFormat")),o(1,h,!1)}var a=this;a.render=n,K.call(a,e,t,"basicWeek");var r=a.opt,o=a.renderBasic,i=a.skipHiddenDays,l=a.getCellsPerWeek,c=t.formatDates}function J(e,t){function n(e,t){t&&s(e,t),i(e,0>t?-1:1);var n=f(e,!0),c=s(f(n),1);a.title=l(e,r("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=c,o(1,1,!1)}var a=this;a.render=n,K.call(a,e,t,"basicDay");var r=a.opt,o=a.renderBasic,i=a.skipHiddenDays,l=t.formatDate}function K(t,n,a){function r(e,t,n){te=e,ne=t,ae=n,o(),I||i(),l()}function o(){se=he("theme")?"ui":"fc",ce=he("columnFormat"),de=he("weekNumbers"),fe=he("weekNumberTitle"),ve="iso"!=he("weekNumberCalculation")?"w":"W"}function i(){K=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function l(){var n=c();$&&$.remove(),$=e(n).appendTo(t),W=$.find("thead"),L=W.find(".fc-day-header"),I=$.find("tbody"),q=I.find("tr"),B=I.find(".fc-day"),V=q.find("td:first-child"),X=q.eq(0).find(".fc-day > div"),J=q.eq(0).find(".fc-day-content > div"),P(W.add(W.find("tr"))),P(q),q.eq(0).addClass("fc-first"),q.filter(":last").addClass("fc-last"),B.each(function(t,n){var a=Me(Math.floor(t/ne),t%ne);ge("dayRender",O,a,e(n))}),y(B)}function c(){return"<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+d()+v()+"</table>"}function d(){var e,t,n=se+"-widget-header",a="";for(a+="<thead><tr>",de&&(a+="<th class='fc-week-number "+n+"'>"+j(fe)+"</th>"),e=0;ne>e;e++)t=Me(0,e),a+="<th class='fc-day-header fc-"+xe[t.getDay()]+" "+n+"'>"+j(Se(t,ce))+"</th>";return a+="</tr></thead>"}function v(){var e,t,n,a=se+"-widget-content",r="";for(r+="<tbody>",e=0;te>e;e++){for(r+="<tr class='fc-week'>",de&&(n=Me(e,0),r+="<td class='fc-week-number "+a+"'><div>"+j(Se(n,ve))+"</div></td>"),t=0;ne>t;t++)n=Me(e,t),r+=h(n);r+="</tr>"}return r+="</tbody>"}function h(e){var t=se+"-widget-content",n=O.start.getMonth(),a=u(new Date),r="",o=["fc-day","fc-"+xe[e.getDay()],t];return e.getMonth()!=n&&o.push("fc-other-month"),+e==+a?o.push("fc-today",se+"-state-highlight"):a>e?o.push("fc-past"):o.push("fc-future"),r+="<td class='"+o.join(" ")+"' data-date='"+Se(e,"yyyy-MM-dd")+"'><div>",ae&&(r+="<div class='fc-day-number'>"+e.getDate()+"</div>"),r+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(t){G=t;var n,a,r,o=G-W.height();"variable"==he("weekMode")?n=a=Math.floor(o/(1==te?2:6)):(n=Math.floor(o/te),a=o-n*(te-1)),V.each(function(t,o){te>t&&(r=e(o),r.find("> div").css("min-height",(t==te-1?a:n)-R(r)))})}function p(e){Z=e,ie.clear(),le.clear(),ee=0,de&&(ee=W.find("th.fc-week-number").outerWidth()),Q=Math.floor((Z-ee)/ne),T(L.slice(0,-1),Q)}function y(e){e.click(w).mousedown(Ce)}function w(t){if(!he("selectable")){var n=m(e(this).data("date"));ge("dayClick",this,n,!0,t)}}function b(e,t,n){n&&re.build();for(var a=Ee(e,t),r=0;a.length>r;r++){var o=a[r];y(D(o.row,o.leftCol,o.row,o.rightCol))}}function D(e,n,a,r){var o=re.rect(e,n,a,r,t);return be(o,t)}function _(e){return f(e)}function C(e,t){b(e,s(f(t),1),!0)}function M(){_e()}function E(e,t,n){var a=Te(e),r=B[a.row*ne+a.col];ge("dayClick",r,e,t,n)}function S(e,t){oe.start(function(e){_e(),e&&D(e.row,e.col,e.row,e.col)},t)}function x(e,t,n){var a=oe.stop();if(_e(),a){var r=Me(a);ge("drop",e,r,!0,t,n)}}function k(e){return f(e.start)}function H(e){return ie.left(e)}function F(e){return ie.right(e)}function N(e){return le.left(e)}function z(e){return le.right(e)}function A(e){return q.eq(e)}var O=this;O.renderBasic=r,O.setHeight=g,O.setWidth=p,O.renderDayOverlay=b,O.defaultSelectionEnd=_,O.renderSelection=C,O.clearSelection=M,O.reportDayClick=E,O.dragStart=S,O.dragStop=x,O.defaultEventEnd=k,O.getHoverListener=function(){return oe},O.colLeft=H,O.colRight=F,O.colContentLeft=N,O.colContentRight=z,O.getIsCellAllDay=function(){return!0},O.allDayRow=A,O.getRowCnt=function(){return te},O.getColCnt=function(){return ne},O.getColWidth=function(){return Q},O.getDaySegmentContainer=function(){return K},ue.call(O,t,n,a),me.call(O),pe.call(O),U.call(O);var $,W,L,I,q,B,V,X,J,K,Z,G,Q,ee,te,ne,ae,re,oe,ie,le,se,ce,de,fe,ve,he=O.opt,ge=O.trigger,be=O.renderOverlay,_e=O.clearOverlays,Ce=O.daySelectionMousedown,Me=O.cellToDate,Te=O.dateToCell,Ee=O.rangeToSegments,Se=n.formatDate;Y(t.addClass("fc-grid")),re=new ye(function(t,n){var a,r,o;L.each(function(t,i){a=e(i),r=a.offset().left,t&&(o[1]=r),o=[r],n[t]=o}),o[1]=r+a.outerWidth(),q.each(function(n,i){te>n&&(a=e(i),r=a.offset().top,n&&(o[1]=r),o=[r],t[n]=o)}),o[1]=r+a.outerHeight()}),oe=new we(re),ie=new De(function(e){return X.eq(e)}),le=new De(function(e){return J.eq(e)})}function U(){function e(e,t){n.renderDayEvents(e,t)}function t(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=e,n.clearEvents=t,fe.call(n)}function Z(e,t){function n(e,t){t&&s(e,7*t);var n=s(f(e),-(e.getDay()-r("firstDay")+7)%7),d=s(f(n),7),u=f(n);i(u);var v=f(d);i(v,-1,!0);var h=l();a.title=c(u,s(f(v),-1),r("titleFormat")),a.start=n,a.end=d,a.visStart=u,a.visEnd=v,o(h)}var a=this;a.render=n,Q.call(a,e,t,"agendaWeek");var r=a.opt,o=a.renderAgenda,i=a.skipHiddenDays,l=a.getCellsPerWeek,c=t.formatDates}function G(e,t){function n(e,t){t&&s(e,t),i(e,0>t?-1:1);var n=f(e,!0),c=s(f(n),1);a.title=l(e,r("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=c,o(1)}var a=this;a.render=n,Q.call(a,e,t,"agendaDay");var r=a.opt,o=a.renderAgenda,i=a.skipHiddenDays,l=t.formatDate}function Q(n,a,r){function o(e){ze=e,i(),Q?c():l()}function i(){je=Je("theme")?"ui":"fc",Ye=Je("isRTL"),Pe=y(Je("minTime")),Ie=y(Je("maxTime")),qe=Je("columnFormat"),Be=Je("weekNumbers"),Ve=Je("weekNumberTitle"),Xe="iso"!=Je("weekNumberCalculation")?"w":"W",Re=Je("snapMinutes")||Je("slotMinutes")}function l(){var t,a,r,o,i,l=je+"-widget-header",s=je+"-widget-content",u=0==Je("slotMinutes")%15;for(c(),ce=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Je("allDaySlot")?(de=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+l+" fc-agenda-axis'>"+Je("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+l+" fc-agenda-gutter'>&nbsp;</th></tr></table>",fe=e(t).appendTo(ce),ve=fe.find("tr"),_(ve.find("td")),ce.append("<div class='fc-agenda-divider "+l+"'><div class='fc-agenda-divider-inner'/></div>")):de=e([]),he=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),ge=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(he),be=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ge),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=v(),o=d(f(a),Ie),d(a,Pe),Ae=0,r=0;o>a;r++)i=a.getMinutes(),t+="<tr class='fc-slot"+r+" "+(i?"fc-minor":"")+"'><th class='fc-agenda-axis "+l+"'>"+(u&&i?"&nbsp;":ot(a,Je("axisFormat")))+"</th><td class='"+s+"'><div style='position:relative'>&nbsp;</div></td></tr>",d(a,Je("slotMinutes")),Ae++;t+="</tbody></table>",_e=e(t).appendTo(ge),C(_e.find("td"))}function c(){var t=h();Q&&Q.remove(),Q=e(t).appendTo(n),te=Q.find("thead"),ne=te.find("th").slice(1,-1),ae=Q.find("tbody"),re=ae.find("td").slice(0,-1),oe=re.find("> div"),ie=re.find(".fc-day-content > div"),le=re.eq(0),se=oe.eq(0),P(te.add(te.find("tr"))),P(ae.add(ae.find("tr")))}function h(){return"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+p()+"</table>"}function g(){var e,t,n,a=je+"-widget-header",r="";for(r+="<thead><tr>",Be?(e=nt(0,0),t=ot(e,Xe),Ye?t+=Ve:t=Ve+t,r+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+j(t)+"</th>"):r+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;ze>n;n++)e=nt(0,n),r+="<th class='fc-"+xe[e.getDay()]+" fc-col"+n+" "+a+"'>"+j(ot(e,qe))+"</th>";return r+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>"}function p(){var e,t,n,a,r,o=je+"-widget-header",i=je+"-widget-content",l=u(new Date),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",t=0;ze>t;t++)e=nt(0,t),r=["fc-col"+t,"fc-"+xe[e.getDay()],i],+e==+l?r.push(je+"-state-highlight","fc-today"):l>e?r.push("fc-past"):r.push("fc-future"),a="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=a;return s+=n,s+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody>"}function m(e){e===t&&(e=Te),Te=e,it={};var n=ae.position().top,a=he.position().top,r=Math.min(e-n,_e.height()+a+1);se.height(r-R(le)),ce.css("top",n),he.height(r-a-1),He=_e.find("tr:first").height()+1,Fe=Je("slotMinutes")/Re,Ne=He/Fe}function w(t){Me=t,We.clear(),Le.clear();var n=te.find("th:first");fe&&(n=n.add(fe.find("th:first"))),n=n.add(_e.find("th:first")),Ee=0,T(n.width("").each(function(t,n){Ee=Math.max(Ee,e(n).outerWidth())}),Ee);var a=Q.find(".fc-agenda-gutter");fe&&(a=a.add(fe.find("th.fc-agenda-gutter")));var r=he[0].clientWidth;ke=he.width()-r,ke?(T(a,ke),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last"),Se=Math.floor((r-Ee)/ze),T(ne.slice(0,-1),Se)}function b(){function e(){he.scrollTop(a)}var t=v(),n=f(t);n.setHours(Je("firstHour"));var a=W(t,n)+1;e(),setTimeout(e,0)}function D(){b()}function _(e){e.click(M).mousedown(et)}function C(e){e.click(M).mousedown(J)}function M(e){if(!Je("selectable")){var t=Math.min(ze-1,Math.floor((e.pageX-Q.offset().left-Ee)/Se)),n=nt(0,t),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var r=parseInt(a[1])*Je("slotMinutes"),o=Math.floor(r/60);n.setHours(o),n.setMinutes(r%60+Pe),Ke("dayClick",re[t],n,!1,e)}else Ke("dayClick",re[t],n,!0,e)}}function S(e,t,n){n&&Oe.build();for(var a=rt(e,t),r=0;a.length>r;r++){var o=a[r];_(x(o.row,o.leftCol,o.row,o.rightCol))}}function x(e,t,n,a){var r=Oe.rect(e,t,n,a,ce);return Ue(r,ce)}function k(e,t){for(var n=0;ze>n;n++){var a=nt(0,n),r=s(f(a),1),o=new Date(Math.max(a,e)),i=new Date(Math.min(r,t));if(i>o){var l=Oe.rect(0,n,0,n,ge),c=W(a,o),d=W(a,i);l.top=c,l.height=d-c,C(Ue(l,ge))}}}function H(e){return We.left(e)}function F(e){return Le.left(e)}function N(e){return We.right(e)}function z(e){return Le.right(e)}function A(e){return Je("allDaySlot")&&!e.row}function $(e){var t=nt(0,e.col),n=e.row;return Je("allDaySlot")&&n--,n>=0&&d(t,Pe+n*Re),t}function W(e,n){if(e=f(e,!0),d(f(e),Pe)>n)return 0;if(n>=d(f(e),Ie))return _e.height();var a=Je("slotMinutes"),r=60*n.getHours()+n.getMinutes()-Pe,o=Math.floor(r/a),i=it[o];return i===t&&(i=it[o]=_e.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+He*(r%a/a)))}function L(){return ve}function I(e){var t=f(e.start);return e.allDay?t:d(t,Je("defaultEventMinutes"))}function q(e,t){return t?f(e):d(f(e),Je("slotMinutes"))}function B(e,t,n){n?Je("allDaySlot")&&S(e,s(f(t),1),!0):V(e,t)}function V(t,n){var a=Je("selectHelper");if(Oe.build(),a){var r=at(t).col;if(r>=0&&ze>r){var o=Oe.rect(0,r,0,r,ge),i=W(t,t),l=W(t,n);if(l>i){if(o.top=i,o.height=l-i,o.left+=2,o.width-=5,e.isFunction(a)){var s=a(t,n);s&&(o.position="absolute",Ce=e(s).css(o).appendTo(ge))}else o.isStart=!0,o.isEnd=!0,Ce=e(tt({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},o)),Ce.css("opacity",Je("dragOpacity"));Ce&&(C(Ce),ge.append(Ce),T(Ce,o.width,!0),E(Ce,o.height,!0))}}}else k(t,n)}function X(){Ze(),Ce&&(Ce.remove(),Ce=null)}function J(t){if(1==t.which&&Je("selectable")){Qe(t);var n;$e.start(function(e,t){if(X(),e&&e.col==t.col&&!A(e)){var a=$(t),r=$(e);n=[a,d(f(a),Re),r,d(f(r),Re)].sort(O),V(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){$e.stop(),n&&(+n[0]==+n[1]&&K(n[0],!1,e),Ge(n[0],n[3],!1,e))})}}function K(e,t,n){Ke("dayClick",re[at(e).col],e,t,n)}function U(e,t){$e.start(function(e){if(Ze(),e)if(A(e))x(e.row,e.col,e.row,e.col);else{var t=$(e),n=d(f(t),Je("defaultEventMinutes"));k(t,n)}},t)}function Z(e,t,n){var a=$e.stop();Ze(),a&&Ke("drop",e,$(a),A(a),t,n)}var G=this;G.renderAgenda=o,G.setWidth=w,G.setHeight=m,G.afterRender=D,G.defaultEventEnd=I,G.timePosition=W,G.getIsCellAllDay=A,G.allDayRow=L,G.getCoordinateGrid=function(){return Oe},G.getHoverListener=function(){return $e},G.colLeft=H,G.colRight=N,G.colContentLeft=F,G.colContentRight=z,G.getDaySegmentContainer=function(){return de},G.getSlotSegmentContainer=function(){return be},G.getMinMinute=function(){return Pe},G.getMaxMinute=function(){return Ie},G.getSlotContainer=function(){return ge},G.getRowCnt=function(){return 1},G.getColCnt=function(){return ze},G.getColWidth=function(){return Se},G.getSnapHeight=function(){return Ne},G.getSnapMinutes=function(){return Re},G.defaultSelectionEnd=q,G.renderDayOverlay=S,G.renderSelection=B,G.clearSelection=X,G.reportDayClick=K,G.dragStart=U,G.dragStop=Z,ue.call(G,n,a,r),me.call(G),pe.call(G),ee.call(G);var Q,te,ne,ae,re,oe,ie,le,se,ce,de,fe,ve,he,ge,be,_e,Ce,Me,Te,Ee,Se,ke,He,Re,Fe,Ne,ze,Ae,Oe,$e,We,Le,je,Ye,Pe,Ie,qe,Be,Ve,Xe,Je=G.opt,Ke=G.trigger,Ue=G.renderOverlay,Ze=G.clearOverlays,Ge=G.reportSelection,Qe=G.unselect,et=G.daySelectionMousedown,tt=G.slotSegHtml,nt=G.cellToDate,at=G.dateToCell,rt=G.rangeToSegments,ot=a.formatDate,it={};Y(n.addClass("fc-agenda")),Oe=new ye(function(t,n){function a(e){return Math.max(s,Math.min(c,e))}var r,o,i;ne.each(function(t,a){r=e(a),o=r.offset().left,t&&(i[1]=o),i=[o],n[t]=i}),i[1]=o+r.outerWidth(),Je("allDaySlot")&&(r=ve,o=r.offset().top,t[0]=[o,o+r.outerHeight()]);for(var l=ge.offset().top,s=he.offset().top,c=s+he.outerHeight(),d=0;Ae*Fe>d;d++)t.push([a(l+Ne*d),a(l+Ne*(d+1))])}),$e=new we(Oe),We=new De(function(e){return oe.eq(e)}),Le=new De(function(e){return ie.eq(e)})}function ee(){function n(e,t){var n,a=e.length,o=[],i=[];for(n=0;a>n;n++)e[n].allDay?o.push(e[n]):i.push(e[n]);y("allDaySlot")&&(ee(o,t),x()),l(r(i),t)}function a(){k().empty(),H().empty()}function r(t){var n,a,r,l,s,c=Y(),u=z(),v=N(),h=e.map(t,i),g=[];for(a=0;c>a;a++)for(n=L(0,a),d(n,u),s=o(t,h,n,d(f(n),v-u)),s=te(s),r=0;s.length>r;r++)l=s[r],l.col=a,g.push(l);return g}function o(e,t,n,a){var r,o,i,l,s,c,d,u,v=[],h=e.length;for(r=0;h>r;r++)o=e[r],i=o.start,(l=t[r])>n&&a>i&&(n>i?(s=f(n),d=!1):(s=i,d=!0),l>a?(c=f(a),u=!1):(c=l,u=!0),v.push({event:o,start:s,end:c,isStart:d,isEnd:u}));return v.sort(de)}function i(e){return e.end?f(e.end):d(f(e.start),y("defaultEventMinutes"))}function l(n,a){var r,o,i,l,s,d,f,v,h,g,p,m,b,D,_,C,T=n.length,E="",x=H(),k=y("isRTL");for(r=0;T>r;r++)o=n[r],i=o.event,l=A(o.start,o.start),s=A(o.start,o.end),d=$(o.col),f=W(o.col),v=f-d,f-=.025*v,v=f-d,h=v*(o.forwardCoord-o.backwardCoord),y("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),k?(p=f-o.backwardCoord*v,g=p-h):(g=d+o.backwardCoord*v,p=g+h),g=Math.max(g,d),p=Math.min(p,f),h=p-g,o.top=l,o.left=g,o.outerWidth=h,o.outerHeight=s-l,E+=c(i,o);for(x[0].innerHTML=E,m=x.children(),r=0;T>r;r++)o=n[r],i=o.event,b=e(m[r]),D=w("eventRender",i,i,b),!1===D?b.remove():(D&&!0!==D&&(b.remove(),b=e(D).css({position:"absolute",top:o.top,left:o.left}).appendTo(x)),o.element=b,i._id===a?u(i,b,o):b[0]._fci=r,X(i,b));for(M(x,n,u),r=0;T>r;r++)o=n[r],(b=o.element)&&(o.vsides=R(b,!0),o.hsides=S(b,!0),_=b.find(".fc-event-title"),_.length&&(o.contentTop=_[0].offsetTop));for(r=0;T>r;r++)o=n[r],(b=o.element)&&(b[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",C=Math.max(0,o.outerHeight-o.vsides),b[0].style.height=C+"px",i=o.event,o.contentTop!==t&&10>C-o.contentTop&&(b.find("div.fc-event-time").text(ae(i.start,y("timeFormat"))+" - "+i.title),b.find("div.fc-event-title").remove()),w("eventAfterRender",i,i,b))}function c(e,t){var n="<",a=e.url,r=I(e,y),o=["fc-event","fc-event-vert"];return b(e)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(e.className),e.source&&(o=o.concat(e.source.className||[])),n+=a?"a href='"+j(e.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+r+"'><div class='fc-event-inner'><div class='fc-event-time'>"+j(re(e.start,e.end,y("timeFormat")))+"</div><div class='fc-event-title'>"+j(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&D(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function u(e,t,n){var a=t.find("div.fc-event-time");b(e)&&g(e,t,a),n.isEnd&&D(e)&&p(e,t,a),T(e,t)}function v(e,t,n){function a(){c||(t.width(r).height("").draggable("option","grid",null),c=!0)}var r,o,i,l=n.isStart,c=!0,d=F(),u=P(),v=q(),g=B(),p=z();t.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,p){w("eventDragStart",t,e,n,p),K(e,t),r=t.width(),
d.start(function(n,r){if(Q(),n){o=!1;var d=L(0,r.col),p=L(0,n.col);i=h(p,d),n.row?l?c&&(t.width(u-10),E(t,v*Math.round((e.end?(e.end-e.start)/Re:y("defaultEventMinutes"))/g)),t.draggable("option","grid",[u,1]),c=!1):o=!0:(G(s(f(e.start),i),s(_(e),i)),a()),o=o||c&&!i}else a(),o=!0;t.draggable("option","revert",o)},n,"drag")},stop:function(n,r){if(d.stop(),Q(),w("eventDragStop",t,e,n,r),o)a(),t.css("filter",""),J(e,t);else{var l=0;c||(l=Math.round((t.offset().top-V().offset().top)/v)*g+p-(60*e.start.getHours()+e.start.getMinutes())),U(this,e,i,l,c,n,r)}}})}function g(e,t,n){function a(){Q(),l&&(u?(n.hide(),t.draggable("option","grid",null),G(s(f(e.start),b),s(_(e),b))):(r(D),n.css("display",""),t.draggable("option","grid",[E,S])))}function r(t){var a,r=d(f(e.start),t);e.end&&(a=d(f(e.end),t)),n.text(re(r,a,y("timeFormat")))}var o,i,l,c,u,v,g,p,b,D,C,M=m.getCoordinateGrid(),T=Y(),E=P(),S=q(),x=B();t.draggable({scroll:!1,grid:[E,S],axis:1==T&&"y",opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,a){w("eventDragStart",t,e,n,a),K(e,t),M.build(),o=t.position(),i=M.cell(n.pageX,n.pageY),l=c=!0,u=v=O(i),g=p=0,b=0,D=C=0},drag:function(e,n){var r=M.cell(e.pageX,e.pageY);if(l=!!r){if(u=O(r),(g=Math.round((n.position.left-o.left)/E))!=p){var s=L(0,i.col),d=i.col+g;d=Math.max(0,d),d=Math.min(T-1,d);var f=L(0,d);b=h(f,s)}u||(D=Math.round((n.position.top-o.top)/S)*x)}(l!=c||u!=v||g!=p||D!=C)&&(a(),c=l,v=u,p=g,C=D),t.draggable("option","revert",!l)},stop:function(n,r){Q(),w("eventDragStop",t,e,n,r),l&&(u||b||D)?U(this,e,b,u?0:D,u,n,r):(l=!0,u=!1,g=0,b=0,D=0,a(),t.css("filter",""),t.css(o),J(e,t))}})}function p(e,t,n){var a,r,o=q(),i=B();t.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){a=r=0,K(e,t),w("eventResizeStart",this,e,n,o)},resize:function(l,s){(a=Math.round((Math.max(o,t.height())-s.originalSize.height)/o))!=r&&(n.text(re(e.start,a||e.end?d(C(e),i*a):null,y("timeFormat"))),r=a)},stop:function(n,r){w("eventResizeStop",this,e,n,r),a?Z(this,e,0,i*a,n,r):J(e,t)}})}var m=this;m.renderEvents=n,m.clearEvents=a,m.slotSegHtml=c,fe.call(m);var y=m.opt,w=m.trigger,b=m.isEventDraggable,D=m.isEventResizable,C=m.eventEnd,T=m.eventElementHandlers,x=m.setHeight,k=m.getDaySegmentContainer,H=m.getSlotSegmentContainer,F=m.getHoverListener,N=m.getMaxMinute,z=m.getMinMinute,A=m.timePosition,O=m.getIsCellAllDay,$=m.colContentLeft,W=m.colContentRight,L=m.cellToDate,Y=m.getColCnt,P=m.getColWidth,q=m.getSnapHeight,B=m.getSnapMinutes,V=m.getSlotContainer,X=m.reportEventElement,J=m.showEvents,K=m.hideEvents,U=m.eventDrop,Z=m.eventResize,G=m.renderDayOverlay,Q=m.clearOverlays,ee=m.renderDayEvents,ne=m.calendar,ae=ne.formatDate,re=ne.formatDates;m.draggableDayEvent=v}function te(e){var t,n=ne(e),a=n[0];if(ae(n),a){for(t=0;a.length>t;t++)re(a[t]);for(t=0;a.length>t;t++)oe(a[t],0,0)}return ie(n)}function ne(e){var t,n,a,r=[];for(t=0;e.length>t;t++){for(n=e[t],a=0;r.length>a&&le(n,r[a]).length;a++);(r[a]||(r[a]=[])).push(n)}return r}function ae(e){var t,n,a,r,o;for(t=0;e.length>t;t++)for(n=e[t],a=0;n.length>a;a++)for(r=n[a],r.forwardSegs=[],o=t+1;e.length>o;o++)le(r,e[o],r.forwardSegs)}function re(e){var n,a,r=e.forwardSegs,o=0;if(e.forwardPressure===t){for(n=0;r.length>n;n++)a=r[n],re(a),o=Math.max(o,1+a.forwardPressure);e.forwardPressure=o}}function oe(e,n,a){var r,o=e.forwardSegs;if(e.forwardCoord===t)for(o.length?(o.sort(ce),oe(o[0],n+1,a),e.forwardCoord=o[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-a)/(n+1),r=0;o.length>r;r++)oe(o[r],0,e.forwardCoord)}function ie(e){var t,n,a,r=[];for(t=0;e.length>t;t++)for(n=e[t],a=0;n.length>a;a++)r.push(n[a]);return r}function le(e,t,n){n=n||[];for(var a=0;t.length>a;a++)se(e,t[a])&&n.push(t[a]);return n}function se(e,t){return e.end>t.start&&e.start<t.end}function ce(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||de(e,t)}function de(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function ue(n,a,r){function o(t,n){var a=X[t];return e.isPlainObject(a)?L(a,n||r):a}function i(e,t){return a.trigger.apply(a,[e,t||W].concat(Array.prototype.slice.call(arguments,2),[W]))}function l(e){var t=e.source||{};return B(e.startEditable,t.startEditable,o("eventStartEditable"),e.editable,t.editable,o("editable"))&&!o("disableDragging")}function c(e){var t=e.source||{};return B(e.durationEditable,t.durationEditable,o("eventDurationEditable"),e.editable,t.editable,o("editable"))&&!o("disableResizing")}function u(e){I={};var t,n,a=e.length;for(t=0;a>t;t++)n=e[t],I[n._id]?I[n._id].push(n):I[n._id]=[n]}function v(){I={},q={},V=[]}function g(e){return e.end?f(e.end):j(e)}function p(e,t){V.push({event:e,element:t}),q[e._id]?q[e._id].push(t):q[e._id]=[t]}function m(){e.each(V,function(e,t){W.trigger("eventDestroy",t.event,t.event,t.element)})}function y(e,n){n.click(function(a){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?t:i("eventClick",this,e,a)}).hover(function(t){i("eventMouseover",this,e,t)},function(t){i("eventMouseout",this,e,t)})}function w(e,t){D(e,t,"show")}function b(e,t){D(e,t,"hide")}function D(e,t,n){var a,r=q[e._id],o=r.length;for(a=0;o>a;a++)t&&r[a][0]==t[0]||r[a][n]()}function _(e,t,n,a,r,o,l){var s=t.allDay,c=t._id;M(I[c],n,a,r),i("eventDrop",e,t,n,a,r,function(){M(I[c],-n,-a,s),P(c)},o,l),P(c)}function C(e,t,n,a,r,o){var l=t._id;T(I[l],n,a),i("eventResize",e,t,n,a,function(){T(I[l],-n,-a),P(l)},r,o),P(l)}function M(e,n,a,r){a=a||0;for(var o,i=e.length,l=0;i>l;l++)o=e[l],r!==t&&(o.allDay=r),d(s(o.start,n,!0),a),o.end&&(o.end=d(s(o.end,n,!0),a)),Y(o,X)}function T(e,t,n){n=n||0;for(var a,r=e.length,o=0;r>o;o++)a=e[o],a.end=d(s(g(a),t,!0),n),Y(a,X)}function E(e){return"object"==typeof e&&(e=e.getDay()),U[e]}function S(){return J}function x(e,t,n){for(t=t||1;U[(e.getDay()+(n?t:0)+7)%7];)s(e,t)}function k(){return F(R(H.apply(null,arguments)))}function H(e,t){var n=W.getColCnt(),a=Q?-1:1,r=Q?n-1:0;return"object"==typeof e&&(t=e.col,e=e.row),e*n+(t*a+r)}function R(e){var t=W.visStart.getDay();return e+=Z[t],7*Math.floor(e/J)+G[(e%J+J)%J]-t}function F(e){var t=f(W.visStart);return s(t,e),t}function N(e){return O(A(z(e)))}function z(e){return h(e,W.visStart)}function A(e){var t=W.visStart.getDay();return e+=t,Math.floor(e/7)*J+Z[(e%7+7)%7]-Z[t]}function O(e){var t=W.getColCnt(),n=Q?-1:1,a=Q?t-1:0;return{row:Math.floor(e/t),col:(e%t+t)%t*n+a}}function $(e,t){for(var n=W.getRowCnt(),a=W.getColCnt(),r=[],o=z(e),i=z(t),l=A(o),s=A(i)-1,c=0;n>c;c++){var d=c*a,u=d+a-1,f=Math.max(l,d),v=Math.min(s,u);if(v>=f){var h=O(f),g=O(v),p=[h.col,g.col].sort(),m=R(f)==o,y=R(v)+1==i;r.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return r}var W=this;W.element=n,W.calendar=a,W.name=r,W.opt=o,W.trigger=i,W.isEventDraggable=l,W.isEventResizable=c,W.setEventData=u,W.clearEventData=v,W.eventEnd=g,W.reportEventElement=p,W.triggerEventDestroy=m,W.eventElementHandlers=y,W.showEvents=w,W.hideEvents=b,W.eventDrop=_,W.eventResize=C;var j=W.defaultEventEnd,Y=a.normalizeEvent,P=a.reportEventChange,I={},q={},V=[],X=a.options;W.isHiddenDay=E,W.skipHiddenDays=x,W.getCellsPerWeek=S,W.dateToCell=N,W.dateToDayOffset=z,W.dayOffsetToCellOffset=A,W.cellOffsetToCell=O,W.cellToDate=k,W.cellToCellOffset=H,W.cellOffsetToDayOffset=R,W.dayOffsetToDate=F,W.rangeToSegments=$;var J,K=o("hiddenDays")||[],U=[],Z=[],G=[],Q=o("isRTL");!function(){!1===o("weekends")&&K.push(0,6);for(var t=0,n=0;7>t;t++)Z[t]=n,U[t]=-1!=e.inArray(t,K),U[t]||(G[n]=t,n++);if(!(J=n))throw"invalid hiddenDays"}()}function fe(){function t(e,t){var n=a(e,!1,!0);he(n,function(e,t){F(e.event,t)}),w(n,t),he(n,function(e,t){x("eventAfterRender",e.event,e.event,t)})}function n(e,t,n){var r=a([e],!0,!1),o=[];return he(r,function(e,a){e.row===t&&a.css("top",n),o.push(a[0])}),o}function a(t,n,a){var o,s,c=K(),f=n?e("<div/>"):c,v=r(t);return i(v),o=l(v),f[0].innerHTML=o,s=f.children(),n&&c.append(s),d(v,s),he(v,function(e,t){e.hsides=S(t,!0)}),he(v,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),he(v,function(e,t){e.outerHeight=t.outerHeight(!0)}),u(v,a),v}function r(e){for(var t=[],n=0;e.length>n;n++){var a=o(e[n]);t.push.apply(t,a)}return t}function o(e){for(var t=e.start,n=_(e),a=te(t,n),r=0;a.length>r;r++)a[r].event=e;return a}function i(e){for(var t=E("isRTL"),n=0;e.length>n;n++){var a=e[n],r=(t?a.isEnd:a.isStart)?X:B,o=(t?a.isStart:a.isEnd)?J:V,i=r(a.leftCol),l=o(a.rightCol);a.left=i,a.outerWidth=l-i}}function l(e){for(var t="",n=0;e.length>n;n++)t+=c(e[n]);return t}function c(e){var t="",n=E("isRTL"),a=e.event,r=a.url,o=["fc-event","fc-event-hori"];k(a)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(a.className),a.source&&(o=o.concat(a.source.className||[]));var i=I(a,E);return t+=r?"<a href='"+j(r)+"'":"<div",t+=" class='"+o.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+i+"'><div class='fc-event-inner'>",!a.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+j(U(a.start,a.end,E("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+j(a.title||"")+"</span></div>",e.isEnd&&H(a)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(r?"a":"div")+">"}function d(t,n){for(var a=0;t.length>a;a++){var r=t[a],o=r.event,i=n.eq(a),l=x("eventRender",o,o,i);!1===l?i.remove():(l&&!0!==l&&(l=e(l).css({position:"absolute",left:r.left}),i.replaceWith(l),i=l),r.element=i)}}function u(e,t){var n=v(e),a=y(),r=[];if(t)for(var o=0;a.length>o;o++)a[o].height(n[o]);for(var o=0;a.length>o;o++)r.push(a[o].position().top);he(e,function(e,t){t.css("top",r[e.row]+e.top)})}function v(e){for(var t=L(),n=P(),a=[],r=g(e),o=0;t>o;o++){for(var i=r[o],l=[],s=0;n>s;s++)l.push(0);for(var c=0;i.length>c;c++){var d=i[c];d.top=$(l.slice(d.leftCol,d.rightCol+1));for(var s=d.leftCol;d.rightCol>=s;s++)l[s]=d.top+d.outerHeight}a.push($(l))}return a}function g(e){var t,n,a,r=L(),o=[];for(t=0;e.length>t;t++)n=e[t],a=n.row,n.element&&(o[a]?o[a].push(n):o[a]=[n]);for(a=0;r>a;a++)o[a]=p(o[a]||[]);return o}function p(e){for(var t=[],n=m(e),a=0;n.length>a;a++)t.push.apply(t,n[a]);return t}function m(e){e.sort(ge);for(var t=[],n=0;e.length>n;n++){for(var a=e[n],r=0;t.length>r&&ve(a,t[r]);r++);t[r]?t[r].push(a):t[r]=[a]}return t}function y(){var e,t=L(),n=[];for(e=0;t>e;e++)n[e]=q(e).find("div.fc-day-content > div");return n}function w(e,t){var n=K();he(e,function(e,n,a){var r=e.event;r._id===t?b(r,n,e):n[0]._fci=a}),M(n,e,b)}function b(e,t,n){k(e)&&T.draggableDayEvent(e,t,n),n.isEnd&&H(e)&&T.resizableDayEvent(e,t,n),N(e,t)}function D(e,t){var n,a=ee();t.draggable({delay:50,opacity:E("dragOpacity"),revertDuration:E("dragRevertDuration"),start:function(r,o){x("eventDragStart",t,e,r,o),A(e,t),a.start(function(a,r,o,i){if(t.draggable("option","revert",!a||!o&&!i),G(),a){var l=ne(r),c=ne(a);n=h(c,l),Z(s(f(e.start),n),s(_(e),n))}else n=0},r,"drag")},stop:function(r,o){a.stop(),G(),x("eventDragStop",t,e,r,o),n?O(this,e,n,0,e.allDay,r,o):(t.css("filter",""),z(e,t))}})}function C(t,a,r){var o=E("isRTL"),i=o?"w":"e",l=a.find(".ui-resizable-"+i),c=!1;Y(a),a.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),l.mousedown(function(o){function l(n){x("eventResizeStop",this,t,n),e("body").css("cursor",""),d.stop(),G(),u&&W(this,t,u,0,n),setTimeout(function(){c=!1},0)}if(1==o.which){c=!0;var d=ee();L(),P();var u,f,v=a.css("top"),h=e.extend({},t),g=ie(oe(t.start));Q(),e("body").css("cursor",i+"-resize").one("mouseup",l),x("eventResizeStart",this,t,o),d.start(function(a,o){if(a){var l=ae(o),c=ae(a);if(c=Math.max(c,g),u=re(c)-re(l)){h.end=s(R(t),u,!0);var d=f;f=n(h,r.row,v),f=e(f),f.find("*").css("cursor",i+"-resize"),d&&d.remove(),A(t)}else f&&(z(t),f.remove(),f=null);G(),Z(t.start,s(_(t),u))}},o)}})}var T=this;T.renderDayEvents=t,T.draggableDayEvent=D,T.resizableDayEvent=C;var E=T.opt,x=T.trigger,k=T.isEventDraggable,H=T.isEventResizable,R=T.eventEnd,F=T.reportEventElement,N=T.eventElementHandlers,z=T.showEvents,A=T.hideEvents,O=T.eventDrop,W=T.eventResize,L=T.getRowCnt,P=T.getColCnt;T.getColWidth;var q=T.allDayRow,B=T.colLeft,V=T.colRight,X=T.colContentLeft,J=T.colContentRight;T.dateToCell;var K=T.getDaySegmentContainer,U=T.calendar.formatDates,Z=T.renderDayOverlay,G=T.clearOverlays,Q=T.clearSelection,ee=T.getHoverListener,te=T.rangeToSegments,ne=T.cellToDate,ae=T.cellToCellOffset,re=T.cellOffsetToDayOffset,oe=T.dateToDayOffset,ie=T.dayOffsetToCellOffset}function ve(e,t){for(var n=0;t.length>n;n++){var a=t[n];if(a.leftCol<=e.rightCol&&a.rightCol>=e.leftCol)return!0}return!1}function he(e,t){for(var n=0;e.length>n;n++){var a=e[n],r=a.element;r&&t(a,r,n)}}function ge(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function pe(){function t(e,t,r){n(),t||(t=s(e,r)),c(e,t,r),a(e,t,r)}function n(e){u&&(u=!1,d(),l("unselect",null,e))}function a(e,t,n,a){u=!0,l("select",null,e,t,n,a)}function r(t){var r=o.cellToDate,l=o.getIsCellAllDay,s=o.getHoverListener(),u=o.reportDayClick;if(1==t.which&&i("selectable")){n(t);var f;s.start(function(e,t){d(),e&&l(e)?(f=[r(t),r(e)].sort(O),c(f[0],f[1],!0)):f=null},t),e(document).one("mouseup",function(e){s.stop(),f&&(+f[0]==+f[1]&&u(f[0],!0,e),a(f[0],f[1],!0,e))})}}var o=this;o.select=t,o.unselect=n,o.reportSelection=a,o.daySelectionMousedown=r;var i=o.opt,l=o.trigger,s=o.defaultSelectionEnd,c=o.renderSelection,d=o.clearSelection,u=!1;i("selectable")&&i("unselectAuto")&&e(document).mousedown(function(t){var a=i("unselectCancel");a&&e(t.target).parents(a).length||n(t)})}function me(){function t(t,n){var a=o.shift();return a||(a=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),a[0].parentNode!=n[0]&&a.appendTo(n),r.push(a.css(t).show()),a}function n(){for(var e;e=r.shift();)o.push(e.hide().unbind())}var a=this;a.renderOverlay=t,a.clearOverlays=n;var r=[],o=[]}function ye(e){var t,n,a=this;a.build=function(){t=[],n=[],e(t,n)},a.cell=function(e,a){var r,o=t.length,i=n.length,l=-1,s=-1;for(r=0;o>r;r++)if(a>=t[r][0]&&t[r][1]>a){l=r;break}for(r=0;i>r;r++)if(e>=n[r][0]&&n[r][1]>e){s=r;break}return l>=0&&s>=0?{row:l,col:s}:null},a.rect=function(e,a,r,o,i){var l=i.offset();return{top:t[e][0]-l.top,left:n[a][0]-l.left,width:n[o][1]-n[a][0],height:t[r][1]-t[e][0]}}}function we(t){function n(e){be(e);var n=t.cell(e.pageX,e.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),r(n,o,n.row-o.row,n.col-o.col)):r(n,o),i=n)}var a,r,o,i,l=this;l.start=function(l,s,c){r=l,o=i=null,t.build(),n(s),a=c||"mousemove",e(document).bind(a,n)},l.stop=function(){return e(document).unbind(a,n),i}}function be(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function De(e){function n(t){return r[t]=r[t]||e(t)}var a=this,r={},o={},i={};a.left=function(e){return o[e]=o[e]===t?n(e).position().left:o[e]},a.right=function(e){return i[e]=i[e]===t?a.left(e)+n(e).width():i[e]},a.clear=function(){r={},o={},i={}}}var _e={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Ce={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Me=e.fullCalendar={version:"1.6.4"},Te=Me.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var r,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=e.data(this,"fullCalendar");if(a&&e.isFunction(a[n])){var i=a[n].apply(a,o);r===t&&(r=i),"destroy"==n&&e.removeData(this,"fullCalendar")}}),r!==t?r:this}n=n||{};var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=e.extend(!0,{},_e,n.isRTL||n.isRTL===t&&_e.isRTL?Ce:{},n),this.each(function(t,r){var o=e(r),l=new a(o,n,i);o.data("fullCalendar",l),l.render()}),this},Me.sourceNormalizers=[],Me.sourceFetchers=[];var Ee={dataType:"json",cache:!1},Se=1;Me.addDays=s,Me.cloneDate=f,Me.parseDate=p,Me.parseISO8601=m,Me.parseTime=y,Me.formatDate=w,Me.formatDates=b;var xe=["sun","mon","tue","wed","thu","fri","sat"],ke=864e5,He=36e5,Re=6e4,Fe={s:function(e){return e.getSeconds()},ss:function(e){return W(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return W(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return W(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return W(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return W(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return W(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return w(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return D(e)}};Me.dateFormatters=Fe,Me.applyAll=q,Te.month=V,Te.basicWeek=X,Te.basicDay=J,n({weekMode:"fixed"}),Te.agendaWeek=Z,Te.agendaDay=G,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),window.initDashboardCalendar=function(){calendarTool.initDashboardCalendar()};var fc_ready=!1;window.initCalendarTool=function(){responsiveCalendar();$(".melis-draggable-input").draggable({zIndex:999,revert:!0,revertDuration:0,start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".melis-draggable-input").on("click",function(){$(this).focus()}),$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title"},buttonText:{today:translations.tr_melistoolcalendar_fullcalendar_today,month:"month",week:"week",day:"day"},monthNames:[translations.tr_melistoolcalendar_fullcalendar_jan,translations.tr_melistoolcalendar_fullcalendar_feb,translations.tr_melistoolcalendar_fullcalendar_mar,translations.tr_melistoolcalendar_fullcalendar_apr,translations.tr_melistoolcalendar_fullcalendar_may,translations.tr_melistoolcalendar_fullcalendar_jun,translations.tr_melistoolcalendar_fullcalendar_jul,translations.tr_melistoolcalendar_fullcalendar_aug,translations.tr_melistoolcalendar_fullcalendar_sep,translations.tr_melistoolcalendar_fullcalendar_oct,translations.tr_melistoolcalendar_fullcalendar_nov,translations.tr_melistoolcalendar_fullcalendar_dec],dayNamesShort:[translations.tr_melistoolcalendar_fullcalendar_sun,translations.tr_melistoolcalendar_fullcalendar_mon,translations.tr_melistoolcalendar_fullcalendar_tue,translations.tr_melistoolcalendar_fullcalendar_wed,translations.tr_melistoolcalendar_fullcalendar_thu,translations.tr_melistoolcalendar_fullcalendar_fri,translations.tr_melistoolcalendar_fullcalendar_sat],editable:!0,droppable:!0,titleFormat:{day:"YYYY-MM-DD"},events:"/melis/MelisCalendar/ToolCalendar/retrieveCalendarEvents",drop:function(e,t){var n=new Array;n.push({name:"cal_event_title",value:$("#newCalendarEventInt").val()}),n.push({name:"cal_date_start",value:$.fullCalendar.formatDate(e,"yyyy-MM-dd")}),n=$.param(n),$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/saveEvent",data:n,dataType:"json",encode:!0}).done(function(e){if(e.success){if(null!==e.event){var t=e.event,n={id:t.id,title:t.id+" : "+t.title,start:t.start,end:t.end},a=n,r=$.extend({},a);$("#calendar").fullCalendar("renderEvent",r,!0),$("#newCalendarEventInt").val(""),melisHelper.zoneReload("id_melistoolcalendar_tool_recent_added","melistoolcalendar_tool_recent_added"),melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisCore.flashMessenger()}}else melisCoreTool.alertDanger("#siteaddalert","",e.textMessage),melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors)}).fail(function(){alert(translations.tr_meliscore_error_message)})},eventRender:function(e,t){t.append("<span class='event-icon'><i class='fa fa-pencil-square-o update-event' data-id='"+e._id+"'></i><i class='fa fa-trash-o delete-event' data-id='"+e._id+"'></i></span>")},eventResize:function(e){calendarTool.reschedEvent(e)},eventDrop:function(e){calendarTool.reschedEvent(e)},eventAfterAllRender:function(e){calendarTool.gotoFCdate(),fc_ready=!0},loading:function(){fc_ready=!0}})};var fcal_year_client_event=null,fcal_month_client_event=null,calendarTool={getCalendarData:function(){initCalendarTool()},reschedEvent:function(e){var t=(e.id,$.fullCalendar.formatDate(e.start,"yyyy-MM-dd")),n=$.fullCalendar.formatDate(e.end,"yyyy-MM-dd"),a=new Array;a.push({name:"cal_id",value:e.id}),a.push({name:"cal_date_start",value:t}),a.push({name:"cal_date_end",value:n}),a=$.param(a),$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/reschedEvent",data:a,dataType:"json",encode:!0}).done(function(e){e.success?(melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisCore.flashMessenger()):(melisCoreTool.alertDanger("#siteaddalert","",e.textMessage),melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors))}).fail(function(){alert(translations.tr_meliscore_error_message)})},deleteEvent:function(e){melisCoreTool.confirm(translations.tr_melistoolcalendar_delete_event_btn_yes,translations.tr_melistoolcalendar_delete_event_btn_no,translations.tr_melistoolcalendar_delete_event_title,translations.tr_melistoolcalendar_delete_event_confirm,function(){$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/deleteEvent",data:{cal_id:e},dataType:"json",encode:!0}).done(function(t){t.success?($("#calendar").fullCalendar("removeEvents",e),melisHelper.melisOkNotification(t.textTitle,t.textMessage),melisCore.flashMessenger(),melisHelper.zoneReload("id_melistoolcalendar_tool_recent_added","melistoolcalendar_tool_recent_added")):(melisCoreTool.alertDanger("#siteaddalert","",t.textMessage),melisHelper.melisKoNotification(t.textTitle,t.textMessage,t.errors))}).fail(function(){alert(translations.tr_meliscore_error_message)})})},editEventTitle:function(e){calVal_eventId=e,calVal_id="id_meliscalendar_tool_edit_event_modal",calVal_melisKey="meliscalendar_tool_edit_event_modal",modalUrl="/melis/MelisCalendar/Calendar/renderCalendarModal",melisHelper.createModal(calVal_id,calVal_melisKey,!1,{cal_id:e},modalUrl)},saveEventTitle:function(){var e=new Array;e.push({name:"cal_id",value:calVal_eventId});var t=$("body #"+calVal_id+" #newCalendarEventInt").val();e.push({name:"cal_event_title",value:t}),e=$.param(e),$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/saveEvent",data:e,dataType:"json",encode:!0}).done(function(e){if(e.success){var n=$("#calendar").fullCalendar("clientEvents",calVal_eventId)[0],a=calVal_eventId+" : "+t;n.title=a,$("#calendar").fullCalendar("updateEvent",n),$("#"+calVal_id+"_container").modal("hide"),melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisCore.flashMessenger()}else melisCoreTool.alertDanger("#siteaddalert","",e.textMessage),melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors)}).fail(function(){alert(translations.tr_meliscore_error_message)})},gotoFCdate:function(){null!=fcal_year_client_event&&null!=fcal_month_client_event&&($("#calendar").fullCalendar("gotoDate",fcal_year_client_event,fcal_month_client_event),fcal_year_client_event=null,fcal_month_client_event=null)},initDashboardCalendar:function(){var e=new Array;$.ajax({url:"/melis/MelisCalendar/ToolCalendar/retrieveDashboardCalendarEvents",dataType:"json",encode:!0}).done(function(t){$.each(t,function(){e.push(String(this.dates))}),$(".dashbaorad-calendar-tool").datepicker({format:"yyyy-mm-dd",inline:!0,showOtherMonths:!0,todayHighlight:!0,toggleActive:!0,beforeShowDay:function(t){var n=t,a=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2),o=n.getFullYear(),i=o+"-"+r+"-"+a;if(-1!=$.inArray(i,e))return{classes:"calendar-highlight calendar-event"}}}).on("changeDate",function(t){var n=t.format("yyyy-mm-dd");-1!=$.inArray(n,e)&&($("#id_meliscore_menu_toolstree li[data-tool-id='id_meliscalendar_tool']").trigger("click"),$("#id_meliscalendar_tool").length&&(fcal_year_client_event=parseInt(t.format("yyyy")),fcal_month_client_event=parseInt(t.format("m"))-1,fc_ready&&melisHelper.zoneReload("id_melistoolcalendar_tool_calendar_content","melistoolcalendar_tool_calendar_content")))})}).fail(function(){alert(translations.tr_meliscore_error_message)})}};$(function(){var e=$("body");initDashboardCalendar(),e.on("click",".delete-event",function(e){var t=$(this);calendarTool.deleteEvent(t.data("id"))}),e.on("click",".update-event",function(e){var t=$(this);calendarTool.editEventTitle(t.data("id"))}),e.on("click",".btnSaveEventTitle",function(e){var t=$(this);calendarTool.saveEventTitle(t.data("id"))})}),$(window).on("resize",function(){responsiveCalendar()});