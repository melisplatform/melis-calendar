function responsiveCalendar(){var e=$(this),t=$("#id_meliscalendar_tool .row .col-md-4");$(window).width()<=991?t.insertAfter(e.parent().find("#id_meliscalendar_tool .row .col-md-8")):t.insertBefore(e.parent().find("#id_meliscalendar_tool .row .col-md-8"))}!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):e(jQuery,moment)}((function(e,t){var n={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:function(e,t){var n=t.longDateFormat("L");n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?n+=" ddd":n="ddd "+n;return n},day:"dddd"},timeFormat:{default:function(e,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0};var a={en:{columnFormat:{week:"ddd M/D"}}},r={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},o=e.fullCalendar={version:"2.0.0"},i=o.views={};function l(e){s(n,e)}function s(t){function n(n,a){e.isPlainObject(a)&&e.isPlainObject(t[n])&&!c(n)?t[n]=s({},t[n],a):void 0!==a&&(t[n]=a)}for(var a=1;a<arguments.length;a++)e.each(arguments[a],n);return t}function c(e){return/(Time|Duration)$/.test(e)}function d(l,c){var d,f=this,v=s({},n,c=c||{});(d=v.lang in a?a[v.lang]:a[n.lang])&&(v=s({},n,d,c)),v.isRTL&&(v=s({},n,r,d||{},c)),f.options=v,f.render=function(t){b?Y()&&(j(),W(t)):function(){v.theme?"ui":"fc",l.addClass("fc"),v.isRTL?l.addClass("fc-rtl"):l.addClass("fc-ltr");v.theme&&l.addClass("ui-widget");b=e("<div class='fc-content' />").prependTo(l),y=new u(f,v),(_=y.render())&&l.prepend(_);$(v.defaultView),v.handleWindowResize&&e(window).on("resize",P);O()||H()}()},f.destroy=function(){w&&(J("viewDestroy",w,w,w.element),w.triggerEventDestroy());e(window).off("resize",P),y.destroy(),b.remove(),l.removeClass("fc fc-rtl ui-widget")},f.refetchEvents=function(){X(),K()},f.reportEvents=function(e){N=e,q()},f.reportEventChange=function(e){V(e)},f.rerenderEvents=V,f.changeView=$,f.select=function(e,t){w.select(e,t)},f.unselect=U,f.prev=function(){F(-1)},f.next=function(){F(1)},f.prevYear=function(){S.add(-1,"years"),F()},f.nextYear=function(){S.add(1,"years"),F()},f.today=function(){S=f.getNow(),F()},f.gotoDate=function(e){S=f.moment(e),F()},f.incrementDate=function(e){S.add(t.duration(e)),F()},f.getDate=function(){return S.clone()},f.getCalendar=function(){return f},f.getView=function(){return w},f.option=function(e,t){if(void 0===t)return v[e];"height"!=e&&"contentHeight"!=e&&"aspectRatio"!=e||(v[e]=t,L())},f.trigger=J;var h=p(t.localeData(v.lang));if(v.monthNames&&(h._months=v.monthNames),v.monthNamesShort&&(h._monthsShort=v.monthNamesShort),v.dayNames&&(h._weekdays=v.dayNames),v.dayNamesShort&&(h._weekdaysShort=v.dayNamesShort),null!=v.firstDay){var g=p(h._week);g.dow=v.firstDay,h._week=g}f.defaultAllDayEventDuration=t.duration(v.defaultAllDayEventDuration),f.defaultTimedEventDuration=t.duration(v.defaultTimedEventDuration),f.moment=function(){var e;return"local"===v.timezone?(e=o.moment.apply(null,arguments)).hasTime()&&e.local():e="UTC"===v.timezone?o.moment.utc.apply(null,arguments):o.moment.parseZone.apply(null,arguments),e._lang=h,e},f.getIsAmbigTimezone=function(){return"local"!==v.timezone&&"UTC"!==v.timezone},f.rezoneDate=function(e){return f.moment(e.toArray())},f.getNow=function(){var e=v.now;return"function"==typeof e&&(e=e()),f.moment(e)},f.calculateWeekNumber=function(e){var t=v.weekNumberCalculation;return"function"==typeof t?t(e):"local"===t?e.week():"ISO"===t.toUpperCase()?e.isoWeek():void 0},f.getEventEnd=function(e){return e.end?e.end.clone():f.getDefaultEventEnd(e.allDay,e.start)},f.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(f.defaultAllDayEventDuration):n.add(f.defaultTimedEventDuration),f.getIsAmbigTimezone()&&n.stripZone(),n},f.formatRange=function(e,t,n){return"function"==typeof n&&(n=n.call(f,v,h)),B(e,t,n,null,v.isRTL)},f.formatDate=function(e,t){return"function"==typeof t&&(t=t.call(f,v,h)),Z(e,t)},m.call(f,v);var y,_,b,w,D,E,S,k,M=f.isFetchNeeded,x=f.fetchEvents,z=l[0],R=0,A=0,N=[];function H(){setTimeout((function(){!w.start&&O()&&F()}),0)}function Y(){return l.is(":visible")}function O(){return e("body").is(":visible")}function $(t){w&&t==w.name||function(t){A++,w&&(J("viewDestroy",w,w,w.element),U(),w.triggerEventDestroy(),G(),w.element.remove(),y.deactivateButton(w.name));y.activateButton(t),w=new i[t](e("<div class='fc-view fc-view-"+t+"' />").appendTo(b),f),F(),Q(),A--}(t)}function F(e){w.start&&!e&&S.isWithin(w.intervalStart,w.intervalEnd)||Y()&&W(e)}function W(e){A++,w.start&&(J("viewDestroy",w,w,w.element),U(),X()),G(),e&&(S=w.incrementDate(S,e)),w.render(S.clone()),I(),Q(),(w.afterRender||C)(),y.updateTitle(w.title),f.getNow().isWithin(w.intervalStart,w.intervalEnd)?y.disableButton("today"):y.enableButton("today"),J("viewRender",w,w,w.element),A--,!v.lazyFetching||M(w.start,w.end)?K():q()}function L(){Y()&&(U(),X(),j(),I(),q())}function j(){E=v.contentHeight?v.contentHeight:v.height?v.height-(_?_.height():0)-T(b):Math.round(b.width()/Math.max(v.aspectRatio,.5))}function I(){void 0===E&&j(),A++,w.setHeight(E),w.setWidth(b.width()),A--,D=l.outerWidth()}function P(){if(!A)if(w.start){var e=++R;setTimeout((function(){e==R&&!A&&Y()&&D!=(D=l.outerWidth())&&(A++,L(),w.trigger("windowResize",z),A--)}),200)}else H()}function V(e){X(),q(e)}function q(e){Y()&&(w.renderEvents(N,e),w.trigger("eventAfterAllRender"))}function X(){w.triggerEventDestroy(),w.clearEvents(),w.clearEventData()}function K(){x(w.start,w.end)}function U(){w&&w.unselect()}function G(){b.css({width:"100%",height:b.height(),overflow:"hidden"})}function Q(){b.css({width:"",height:"",overflow:""})}function J(e,t){if(v[e])return v[e].apply(t||z,Array.prototype.slice.call(arguments,2))}S=null!=v.defaultDate?f.moment(v.defaultDate):f.getNow(),v.droppable&&e(document).on("dragstart",(function(t,n){var a=t.target,r=e(a);if(!r.parents(".fc").length){var o=v.dropAccept;("function"==typeof o?o.call(a,r):r.is(o))&&(k=a,w.dragStart(k,t,n))}})).on("dragstop",(function(e,t){k&&(w.dragStop(k,e,t),k=null)}))}function u(t,n){var a=this;a.render=function(){if(r=n.theme?"ui":"fc",n.header)return o=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(l("left")).append(l("center")).append(l("right")))},a.destroy=function(){o.remove()},a.updateTitle=function(e){o.find("h2").html(e)},a.activateButton=function(e){o.find("span.fc-button-"+e).addClass(r+"-state-active")},a.deactivateButton=function(e){o.find("span.fc-button-"+e).removeClass(r+"-state-active")},a.disableButton=function(e){o.find("span.fc-button-"+e).addClass(r+"-state-disabled")},a.enableButton=function(e){o.find("span.fc-button-"+e).removeClass(r+"-state-disabled")};var r,o=e([]);function l(a){var o=e("<td class='fc-header-"+a+"'/>"),l=n.header[a];return l&&e.each(l.split(" "),(function(a){var l;a>0&&o.append("<span class='fc-header-space'/>"),e.each(this.split(","),(function(a,s){var c;if("title"==s)o.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),l&&l.addClass(r+"-corner-right"),l=null;else if(t[s]?c=t[s]:i[s]&&(c=function(){h.removeClass(r+"-state-hover"),t.changeView(s)}),c){var d,u=k(n.themeButtonIcons,s),f=k(n.buttonIcons,s),v=k(n.defaultButtonText,s),m=k(n.buttonText,s);d=m?M(m):u&&n.theme?"<span class='ui-icon ui-icon-"+u+"'></span>":f&&!n.theme?"<span class='fc-icon fc-icon-"+f+"'></span>":M(v||s);var h=e("<span class='fc-button fc-button-"+s+" "+r+"-state-default'>"+d+"</span>").on("click",(function(){h.hasClass(r+"-state-disabled")||c()})).on("mousedown",(function(){h.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")})).on("mouseup",(function(){h.removeClass(r+"-state-down")})).on("mouseenter",(function(){h.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")})).on("mouseleave",(function(){h.removeClass(r+"-state-hover").removeClass(r+"-state-down")})).appendTo(o);z(h),l||h.addClass(r+"-corner-left"),l=h}})),l&&l.addClass(r+"-corner-right")})),o}}e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),a=this;return this.each((function(r,o){var i,l=e(o),s=l.data("fullCalendar");"string"==typeof t?s&&"function"==typeof s[t]&&(i=s[t].apply(s,n),r||(a=i),"destroy"===t&&l.removeData("fullCalendar")):s||(s=new d(l,t),l.data("fullCalendar",s),s.render())})),a},o.langs=a,o.datepickerLang=function(t,n,r){var o=a[t];o||(o=a[t]={}),s(o,{isRTL:r.isRTL,weekNumberTitle:r.weekHeader,titleFormat:{month:r.showMonthAfterYear?"YYYY["+r.yearSuffix+"] MMMM":"MMMM YYYY["+r.yearSuffix+"]"},defaultButtonText:{prev:x(r.prevText),next:x(r.nextText),today:x(r.currentText)}}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(r))},o.lang=function(e,t){var r;t&&((r=a[e])||(r=a[e]={}),s(r,t||{})),n.lang=e},o.sourceNormalizers=[],o.sourceFetchers=[];var f={dataType:"json",cache:!1},v=1;function m(t){var n=this;n.isFetchNeeded=function(e,t){return!a||e.clone().stripZone()<a.clone().stripZone()||t.clone().stripZone()>r.clone().stripZone()},n.fetchEvents=function(e,t){a=e,r=t,_=[];var n=++m,o=u.length;p=o;for(var i=0;i<o;i++)D(u[i],n)},n.addEventSource=function(e){(e=C(e))&&(p++,D(e,m))},n.removeEventSource=function(t){u=e.grep(u,(function(e){return!R(e,t)})),_=e.grep(_,(function(e){return!R(e.source,t)})),s(_)},n.updateEvent=function(e){e.start=n.moment(e.start),e.end&&(e.end=n.moment(e.end));z(e),function(e){var t,n,a,r;for(t=0;t<_.length;t++)if((n=_[t])._id==e._id&&n!==e)for(a=0;a<E.length;a++)void 0!==e[r=E[a]]&&(n[r]=e[r])}(e),s(_)},n.renderEvent=function(e,t){var n=x(e);n&&(n.source||(t&&(d.events.push(n),n.source=d),_.push(n)),s(_))},n.removeEvents=function(t){var n;if(t){for(_=e.grep(_,t,!0),n=0;n<u.length;n++)Array.isArray(u[n].events)&&(u[n].events=e.grep(u[n].events,t,!0))}else for(_=[],n=0;n<u.length;n++)Array.isArray(u[n].events)&&(u[n].events=[]);s(_)},n.clientEvents=S,n.mutateEvent=z;var a,r,i=n.trigger,l=n.getView,s=n.reportEvents,c=n.getEventEnd,d={events:[]},u=[d],m=0,p=0,g=0,_=[],b=t.eventSources||[];t.events&&b.push(t.events);for(var w=0;w<b.length;w++)C(b[w]);function D(e,t){T(e,(function(n){if(t==m){if(n)for(var a=0;a<n.length;a++){var r=x(n[a],e);r&&_.push(r)}--p||s(_)}}))}function T(i,l){var s,c,d=o.sourceFetchers;for(s=0;s<d.length;s++){if(!0===(c=d[s].call(n,i,a.clone(),r.clone(),t.timezone,l)))return;if("object"==typeof c)return void T(c,l)}var u=i.events;if(u)"function"==typeof u?(k(),u.call(n,a.clone(),r.clone(),t.timezone,(function(e){l(e),M()}))):Array.isArray(u)?l(u):l();else if(i.url){var v,m=i.success,h=i.error,p=i.complete;v="function"==typeof i.data?i.data():i.data;var g=e.extend({},v||{}),y=H(i.startParam,t.startParam),_=H(i.endParam,t.endParam),b=H(i.timezoneParam,t.timezoneParam);y&&(g[y]=a.format()),_&&(g[_]=r.format()),t.timezone&&"local"!=t.timezone&&(g[b]=t.timezone),k(),e.ajax(e.extend({},f,i,{data:g,success:function(e){e=e||[];var t=N(m,this,arguments);Array.isArray(t)&&(e=t),l(e)},error:function(){N(h,this,arguments),l()},complete:function(){N(p,this,arguments),M()}}))}else l()}function C(e){if("function"==typeof e||Array.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=o.sourceNormalizers,a=0;a<t.length;a++)t[a].call(n,e)}(e),u.push(e),e}var E=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];function S(t){return"function"==typeof t?e.grep(_,t):t?(t+="",e.grep(_,(function(e){return e._id==t}))):_}function k(){g++||i("loading",null,!0,l())}function M(){--g||i("loading",null,!1,l())}function x(a,r){var o,i,l,s,d={};if(t.eventDataTransform&&(a=t.eventDataTransform(a)),r&&r.eventDataTransform&&(a=r.eventDataTransform(a)),(o=n.moment(a.start||a.date)).isValid()&&(i=null,!a.end||(i=n.moment(a.end)).isValid()))return void 0===(l=a.allDay)&&(l=void 0!==(s=H(r?r.allDayDefault:void 0,t.allDayDefault))?s:!(o.hasTime()||i&&i.hasTime())),l?(o.hasTime()&&o.stripTime(),i&&i.hasTime()&&i.stripTime()):(o.hasTime()||(o=n.rezoneDate(o)),i&&!i.hasTime()&&(i=n.rezoneDate(i))),e.extend(d,a),r&&(d.source=r),d._id=a._id||(void 0===a.id?"_fc"+v++:a.id+""),a.className?"string"==typeof a.className?d.className=a.className.split(/\s+/):d.className=a.className:d.className=[],d.allDay=l,d.start=o,d.end=i,t.forceEventDuration&&!d.end&&(d.end=c(d)),h(d),d}function z(a,r,o){var i,l,s,c=a._allDay,d=a._start,u=a._end,f=!1;return r||o||(r=a.start,o=a.end),(i=a.allDay!=c?a.allDay:!(r||o).hasTime())&&(r&&(r=r.clone().stripTime()),o&&(o=o.clone().stripTime())),r&&(l=y(r,i?d.clone().stripTime():d)),i!=c?f=!0:o&&(s=y(o||n.getDefaultEventEnd(i,r||d),r||d).subtract(y(u||n.getDefaultEventEnd(c,d),d))),function(a,r,o,i,l){var s=n.getIsAmbigTimezone(),c=[];return e.each(a,(function(e,a){var d=a._allDay,u=a._start,f=a._end,v=null!=o?o:d,m=u.clone(),p=!r&&f?f.clone():null;v?(m.stripTime(),p&&p.stripTime()):(m.hasTime()||(m=n.rezoneDate(m)),p&&!p.hasTime()&&(p=n.rezoneDate(p))),p||!t.forceEventDuration&&!+l||(p=n.getDefaultEventEnd(v,m)),m.add(i),p&&p.add(i).add(l),s&&(+i||+l)&&(m.stripZone(),p&&p.stripZone()),a.allDay=v,a.start=m,a.end=p,h(a),c.push((function(){a.allDay=d,a.start=u,a.end=f,h(a)}))})),function(){for(var e=0;e<c.length;e++)c[e]()}}(S(a._id),f,i,l,s)}function R(e,t){return e&&t&&A(e)==A(t)}function A(e){return("object"==typeof e?e.events||e.url:"")||e}}function h(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}function p(e){var t=function(){};return t.prototype=e,new t}o.applyAll=N;var g=["sun","mon","tue","wed","thu","fri","sat"];function y(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function _(t,n,a){t.off("mouseover").on("mouseover",(function(t){for(var r,o,i,l=t.target;l!=this;)r=l,l=l.parentNode;void 0!==(o=r._fci)&&(r._fci=void 0,i=n[o],a(i.event,i.element,i),e(t.target).trigger(t)),t.stopPropagation()}))}function b(t,n,a){for(var r,o=0;o<t.length;o++)(r=e(t[o])).width(Math.max(0,n-D(r,a)))}function w(t,n,a){for(var r,o=0;o<t.length;o++)(r=e(t[o])).height(Math.max(0,n-T(r,a)))}function D(t,n){return function(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}(t)+function(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}(t)+(n?function(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}(t):0)}function T(t,n){return function(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}(t)+function(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}(t)+(n?function(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}(t):0)}function C(){}function E(e,t){return e-t}function S(e){return Math.max.apply(Math,e)}function k(e,t){if(void 0!==(e=e||{})[t])return e[t];for(var n,a=t.split(/(?=[A-Z])/),r=a.length-1;r>=0;r--)if(void 0!==(n=e[a[r].toLowerCase()]))return n;return e.default}function M(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function x(e){return e.replace(/&.*?;/g,"")}function z(e){e.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",(function(){return!1}))}function R(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function A(e,t){var n=e.source||{},a=e.color,r=n.color,o=t("eventColor"),i=e.backgroundColor||a||n.backgroundColor||r||t("eventBackgroundColor")||o,l=e.borderColor||a||n.borderColor||r||t("eventBorderColor")||o,s=e.textColor||n.textColor||t("eventTextColor"),c=[];return i&&c.push("background-color:"+i),l&&c.push("border-color:"+l),s&&c.push("color:"+s),c.join(";")}function N(e,t,n){if("function"==typeof e&&(e=[e]),e){var a,r;for(a=0;a<e.length;a++)r=e[a].apply(t,n)||r;return r}}function H(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}var Y=/^\s*\d{4}-\d\d$/,O=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;function $(e,n,a){var r,o,i,l,s=e[0],c=1==e.length&&"string"==typeof s;return t.isMoment(s)?(l=t.apply(null,e),s._ambigTime&&(l._ambigTime=!0),s._ambigZone&&(l._ambigZone=!0)):!function(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}(s)&&void 0!==s?(r=!1,o=!1,c?Y.test(s)?(e=[s+="-01"],r=!0,o=!0):(i=O.exec(s))&&(r=!i[5],o=!0):Array.isArray(s)&&(o=!0),l=n?t.utc.apply(t,e):t.apply(null,e),r?(l._ambigTime=!0,l._ambigZone=!0):a&&(o?l._ambigZone=!0:c&&l.utcOffset(s))):l=t.apply(null,e),new F(l)}function F(e){!function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(this,e)}function W(e){var t,n=[],a=!1,r=!1;for(t=0;t<e.length;t++)n.push(o.moment(e[t])),a=a||n[t]._ambigTime,r=r||n[t]._ambigZone;for(t=0;t<n.length;t++)a?n[t].stripTime():r&&n[t].stripZone();return n}function L(e,n){return t.fn.format.call(e,n)}function Z(e,t){return j(e,K(t))}function j(e,t){var n,a="";for(n=0;n<t.length;n++)a+=P(e,t[n]);return a}o.moment=function(){return $(arguments)},o.moment.utc=function(){var e=$(arguments,!0);return e.hasTime()&&e.utc(),e},o.moment.parseZone=function(){return $(arguments,!0,!0)},F.prototype=p(t.fn),F.prototype.clone=function(){return $([this])},F.prototype.time=function(e){return null==e?t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}):(delete this._ambigTime,t.isDuration(e)||t.isMoment(e)||(e=t.duration(e)),this.hours(e.hours()+24*e.days()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds()))},F.prototype.stripTime=function(){var e=this.toArray();return t.fn.utc.call(this),this._ambigTime=!0,this._ambigZone=!0,this.year(e[0]).month(e[1]).date(e[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this},F.prototype.hasTime=function(){return!this._ambigTime},F.prototype.stripZone=function(){var e=this.toArray(),n=this._ambigTime;return t.fn.utc.call(this),this.year(e[0]).month(e[1]).date(e[2]).hours(e[3]).minutes(e[4]).seconds(e[5]).milliseconds(e[6]),n&&(this._ambigTime=!0),this._ambigZone=!0,this},F.prototype.hasZone=function(){return!this._ambigZone},F.prototype.zone=function(e){return null!=e&&(delete this._ambigTime,delete this._ambigZone),t.fn.zone.apply(this,arguments)},F.prototype.local=function(){var e=this.toArray(),n=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,t.fn.local.apply(this,arguments),n&&this.year(e[0]).month(e[1]).date(e[2]).hours(e[3]).minutes(e[4]).seconds(e[5]).milliseconds(e[6]),this},F.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,t.fn.utc.apply(this,arguments)},F.prototype.format=function(){return arguments[0]?Z(this,arguments[0]):this._ambigTime?L(this,"YYYY-MM-DD"):this._ambigZone?L(this,"YYYY-MM-DD[T]HH:mm:ss"):L(this)},F.prototype.toISOString=function(){return this._ambigTime?L(this,"YYYY-MM-DD"):this._ambigZone?L(this,"YYYY-MM-DD[T]HH:mm:ss"):t.fn.toISOString.apply(this,arguments)},F.prototype.isWithin=function(e,t){var n=W([this,e,t]);return n[0]>=n[1]&&n[0]<n[2]},e.each(["isBefore","isAfter","isSame"],(function(e,n){F.prototype[n]=function(e,a){var r=W([this,e]);return t.fn[n].call(r[0],r[1],a)}}));var I={t:function(e){return L(e,"a").charAt(0)},T:function(e){return L(e,"A").charAt(0)}};function P(e,t){var n,a;return"string"==typeof t?t:(n=t.token)?I[n]?I[n](e):L(e,n):t.maybe&&(a=j(e,t.maybe)).match(/[1-9]/)?a:""}function B(e,t,n,a,r){return e=o.moment.parseZone(e),t=o.moment.parseZone(t),n=e.lang().longDateFormat(n)||n,a=a||" - ",function(e,t,n,a,r){var o,i,l,s,c="",d="",u="",f="",v="";for(i=0;i<n.length&&!1!==(o=q(e,t,n[i]));i++)c+=o;for(l=n.length-1;l>i&&!1!==(o=q(e,t,n[l]));l--)d=o+d;for(s=i;s<=l;s++)u+=P(e,n[s]),f+=P(t,n[s]);(u||f)&&(v=r?f+a+u:u+a+f);return c+v+d}(e,t,K(n),a,r)}o.formatRange=B;var V={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function q(e,t,n){var a,r;return"string"==typeof n?n:!!((a=n.token)&&(r=V[a.charAt(0)])&&e.isSame(t,r))&&L(e,a)}var X={};function K(e){return e in X?X[e]:X[e]=U(e)}function U(e){for(var t,n=[],a=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;t=a.exec(e);)t[1]?n.push(t[1]):t[2]?n.push({maybe:U(t[2])}):t[3]?n.push({token:t[3]}):t[5]&&n.push(t[5]);return n}function G(t,n,a){var r=this;r.renderBasic=function(n,a,h){w=n,D=a,C=h,A=Y("theme")?"ui":"fc",N=Y("columnFormat"),H=Y("weekNumbers"),s||(m=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t));!function(){var n=function(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var e,t,n=A+"-widget-header",a="";a+="<thead><tr>",H&&(a+="<th class='fc-week-number "+n+"'>"+M(Y("weekNumberTitle"))+"</th>");for(e=0;e<D;e++)t=L(0,e),a+="<th class='fc-day-header fc-"+g[t.day()]+" "+n+"'>"+M(I(t,N))+"</th>";return a+="</tr></thead>",a}()+function(){var e,t,n,a=A+"-widget-content",r="";for(r+="<tbody>",e=0;e<w;e++){for(r+="<tr class='fc-week'>",H&&(n=L(e,0),r+="<td class='fc-week-number "+a+"'><div>"+M(P(n))+"</div></td>"),t=0;t<D;t++)r+=B(n=L(e,t));r+="</tr>"}return r+="</tbody>",r}()+"</table>";return e}();o&&o.remove();o=e(n).appendTo(t),i=o.find("thead"),l=i.find(".fc-day-header"),s=o.find("tbody"),c=s.find("tr"),d=s.find(".fc-day"),u=c.find("td:first-child"),f=c.eq(0).find(".fc-day > div"),v=c.eq(0).find(".fc-day-content > div"),R(i.add(i.find("tr"))),R(c),c.eq(0).addClass("fc-first"),c.filter(":last").addClass("fc-last"),d.each((function(t,n){var a=L(Math.floor(t/D),t%D);O("dayRender",r,a,e(n))})),V(d)}()},r.setHeight=function(t){p=t;var n,a,r,o=Math.max(p-i.height(),0);"variable"==Y("weekMode")?n=a=Math.floor(o/(1==w?2:6)):(n=Math.floor(o/w),a=o-n*(w-1));u.each((function(t,o){t<w&&(r=e(o)).find("> div").css("min-height",(t==w-1?a:n)-T(r))}))},r.setWidth=function(e){h=e,k.clear(),x.clear(),_=0,H&&(_=i.find("th.fc-week-number").outerWidth());y=Math.floor((h-_)/D),b(l.slice(0,-1),y)},r.renderDayOverlay=X,r.defaultSelectionEnd=function(e){return e.clone().stripTime().add(1,"days")},r.renderSelection=function(e,t){X(e,t,!0)},r.clearSelection=function(){F()},r.reportDayClick=function(e,t){var n=Z(e),a=d[n.row*D+n.col];O("dayClick",a,e,t)},r.dragStart=function(e,t,a){S.start((function(e){if(F(),e){var t=L(e),a=t.clone().add(n.defaultAllDayEventDuration);X(t,a)}}),t)},r.dragStop=function(e,t,n){var a=S.stop();F(),a&&O("drop",e,L(a),t,n)},r.getHoverListener=function(){return S},r.colLeft=function(e){return k.left(e)},r.colRight=function(e){return k.right(e)},r.colContentLeft=function(e){return x.left(e)},r.colContentRight=function(e){return x.right(e)},r.getIsCellAllDay=function(){return!0},r.allDayRow=function(e){return c.eq(e)},r.getRowCnt=function(){return w},r.getColCnt=function(){return D},r.getColWidth=function(){return y},r.getDaySegmentContainer=function(){return m},le.call(r,t,n,a),ve.call(r),fe.call(r),Q.call(r);var o,i,l,s,c,d,u,f,v,m,h,p,y,_,w,D,C,E,S,k,x,A,N,H,Y=r.opt,O=r.trigger,$=r.renderOverlay,F=r.clearOverlays,W=r.daySelectionMousedown,L=r.cellToDate,Z=r.dateToCell,j=r.rangeToSegments,I=n.formatDate,P=n.calculateWeekNumber;function B(e){var t=r.intervalStart.month(),a=n.getNow().stripTime(),o="",i=A+"-widget-content",l=["fc-day","fc-"+g[e.day()],i];return e.month()!=t&&l.push("fc-other-month"),e.isSame(a,"day")?l.push("fc-today",A+"-state-highlight"):e<a?l.push("fc-past"):l.push("fc-future"),o+="<td class='"+l.join(" ")+"' data-date='"+e.format()+"'><div>",C&&(o+="<div class='fc-day-number'>"+e.date()+"</div>"),o+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function V(e){e.on("click",q).on("mousedown",W)}function q(t){if(!Y("selectable")){var a=n.moment(e(this).data("date"));O("dayClick",this,a,t)}}function X(e,n,a){a&&E.build();for(var r,o,i,l,s,c=j(e,n),d=0;d<c.length;d++){var u=c[d];V((r=u.row,o=u.leftCol,i=u.row,l=u.rightCol,s=void 0,s=E.rect(r,o,i,l,t),$(s,t)))}}z(t.addClass("fc-grid")),E=new me((function(t,n){var a,r,o;l.each((function(t,i){a=e(i),r=a.offset().left,t&&(o[1]=r),o=[r],n[t]=o})),o[1]=r+a.outerWidth(),c.each((function(n,i){n<w&&(a=e(i),r=a.offset().top,n&&(o[1]=r),o=[r],t[n]=o)})),o[1]=r+a.outerHeight()})),S=new he(E),k=new pe((function(e){return f.eq(e)})),x=new pe((function(e){return v.eq(e)}))}function Q(){var e=this;e.renderEvents=function(t,n){e.renderDayEvents(t,n)},e.clearEvents=function(){e.getDaySegmentContainer().empty()},se.call(e)}function J(n,a,r){var o=this;o.renderAgenda=function(a){Z=a,q=Q("theme")?"ui":"fc",X=Q("isRTL"),G=Q("columnFormat"),K=t.duration(Q("minTime")),U=t.duration(Q("maxTime")),O=t.duration(Q("slotDuration")),F=(F=Q("snapDuration"))?t.duration(F):O,i?_e():function(){var a,r,i,l,s=q+"-widget-header",c=q+"-widget-content",d=O.asMinutes()%15==0;_e(),h=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Q("allDaySlot")?(p=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(h),a="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+(Q("allDayHTML")||M(Q("allDayText")))+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",y=e(a).appendTo(h),be((_=y.find("tr")).find("td")),h.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):p=e([]);D=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(h),C=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(D),S=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(C),a="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=t.duration(+K),j=0;for(;r<U;)l=(i=o.start.clone().time(r)).minutes(),a+="<tr class='fc-slot"+j+" "+(l?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(d&&l?"&nbsp;":M(ue(i,Q("axisFormat"))))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",r.add(O),j++;we((k=e(a+="</tbody></table>").appendTo(C)).find("td"))}()},o.setWidth=function(t){t,B.clear(),V.clear();var n=l.find("th:first");y&&(n=n.add(y.find("th:first")));n=n.add(k.find("th:first")),N=0,b(n.width("").each((function(t,n){N=Math.max(N,e(n).outerWidth())})),N);var a=i.find(".fc-agenda-gutter");y&&(a=a.add(y.find("th.fc-agenda-gutter")));var r=D[0].clientWidth;(Y=D.width()-r)?(b(a,Y),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");H=Math.floor((r-N)/Z),b(s.slice(0,-1),H)},o.setHeight=function(e){void 0===e&&(e=A);A=e,ye={};var t=c.position().top,n=D.position().top,a=Math.min(e-t,k.height()+n+1);m.height(a-T(v)),h.css("top",t),D.height(a-n-1);var r=k.find("tr:first").height()+1,o=k.find("tr:eq(1)").height();L=($=(r+o)/2)/(W=O/F)},o.afterRender=function(){!function(){var e=Me(t.duration(Q("scrollTime")))+1;function n(){D.scrollTop(e)}n(),setTimeout(n,0)}()},o.computeDateTop=ke,o.getIsCellAllDay=Ee,o.allDayRow=function(){return _},o.getCoordinateGrid=function(){return I},o.getHoverListener=function(){return P},o.colLeft=function(e){return B.left(e)},o.colRight=function(e){return B.right(e)},o.colContentLeft=function(e){return V.left(e)},o.colContentRight=function(e){return V.right(e)},o.getDaySegmentContainer=function(){return p},o.getSlotSegmentContainer=function(){return S},o.getSlotContainer=function(){return C},o.getRowCnt=function(){return 1},o.getColCnt=function(){return Z},o.getColWidth=function(){return H},o.getSnapHeight=function(){return L},o.getSnapDuration=function(){return F},o.getSlotHeight=function(){return $},o.getSlotDuration=function(){return O},o.getMinTime=function(){return K},o.getMaxTime=function(){return U},o.defaultSelectionEnd=function(e){return e.hasTime()?e.clone().add(O):e.clone().add(1,"days")},o.renderDayOverlay=Te,o.renderSelection=function(e,t){e.hasTime()||t.hasTime()?xe(e,t):Q("allDaySlot")&&Te(e,t,!0)},o.clearSelection=ze,o.reportDayClick=Ae,o.dragStart=function(e,t,n){P.start((function(e){if(ne(),e){var t=Se(e),n=t.clone();t.hasTime()?(n.add(a.defaultTimedEventDuration),Ce(t,n)):(n.add(a.defaultAllDayEventDuration),Te(t,n))}}),t)},o.dragStop=function(e,t,n){var a=P.stop();ne(),a&&J("drop",e,Se(a),t,n)},le.call(o,n,a,r),ve.call(o),fe.call(o),ee.call(o);var i,l,s,c,d,u,f,v,m,h,p,y,_,D,C,S,k,x,A,N,H,Y,O,$,F,W,L,Z,j,I,P,B,V,q,X,K,U,G,Q=o.opt,J=o.trigger,te=o.renderOverlay,ne=o.clearOverlays,ae=o.reportSelection,re=o.unselect,oe=o.daySelectionMousedown,ie=o.slotSegHtml,se=o.cellToDate,ce=o.dateToCell,de=o.rangeToSegments,ue=a.formatDate,ge=a.calculateWeekNumber,ye={};function _e(){var t=function(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var e,t,n,a=q+"-widget-header",r="";r+="<thead><tr>",Q("weekNumbers")?(e=se(0,0),t=ge(e),X?t+=Q("weekNumberTitle"):t=Q("weekNumberTitle")+t,r+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+M(t)+"</th>"):r+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>";for(n=0;n<Z;n++)e=se(0,n),r+="<th class='fc-"+g[e.day()]+" fc-col"+n+" "+a+"'>"+M(ue(e,G))+"</th>";return r+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>",r}()+function(){var e,t,n,r,o=q+"-widget-header",i=q+"-widget-content",l=a.getNow().stripTime(),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",t=0;t<Z;t++)e=se(0,t),r=["fc-col"+t,"fc-"+g[e.day()],i],e.isSame(l,"day")?r.push(q+"-state-highlight","fc-today"):e<l?r.push("fc-past"):r.push("fc-future"),n+="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return s+=n,s+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody>",s}()+"</table>";return e}();i&&i.remove(),i=e(t).appendTo(n),l=i.find("thead"),s=l.find("th").slice(1,-1),c=i.find("tbody"),d=c.find("td").slice(0,-1),u=d.find("> div"),f=d.find(".fc-day-content > div"),v=d.eq(0),m=u.eq(0),R(l.add(l.find("tr"))),R(c.add(c.find("tr")))}function be(e){e.on("click",De).on("mousedown",oe)}function we(e){e.on("click",De).on("mousedown",Re)}function De(e){if(!Q("selectable")){var t=Math.min(Z-1,Math.floor((e.pageX-i.offset().left-N)/H)),n=se(0,t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var o=parseInt(r[1],10);n.add(K+o*O),n=a.rezoneDate(n),J("dayClick",d[t],n,e)}else J("dayClick",d[t],n,e)}}function Te(e,t,n){n&&I.build();for(var a,r,o,i,l,s=de(e,t),c=0;c<s.length;c++){var d=s[c];be((a=d.row,r=d.leftCol,o=d.row,i=d.rightCol,l=void 0,l=I.rect(a,r,o,i,h),te(l,h)))}}function Ce(e,t){e=e.clone().stripZone(),t=t.clone().stripZone();for(var n=0;n<Z;n++){var a=se(0,n),r=a.clone().add(1,"days"),o=a<e?e:a,i=r<t?r:t;if(o<i){var l=I.rect(0,n,0,n,C),s=ke(o,a),c=ke(i,a);l.top=s,l.height=c-s,we(te(l,C))}}}function Ee(e){return Q("allDaySlot")&&!e.row}function Se(e){var n=se(0,e.col),r=e.row;return Q("allDaySlot")&&r--,r>=0&&(n.time(t.duration(K+r*F)),n=a.rezoneDate(n)),n}function ke(e,n){return Me(t.duration(e.clone().stripZone()-n.clone().stripTime()))}function Me(e){if(e<K)return 0;if(e>=U)return k.height();var t=(e-K)/O,n=Math.floor(t),a=t-n,r=ye[n];void 0===r&&(r=ye[n]=k.find("tr").eq(n).find("td div")[0].offsetTop);var o=r-1+a*$;return o=Math.max(o,0)}function xe(t,n){var a=Q("selectHelper");if(I.build(),a){var r=ce(t).col;if(r>=0&&r<Z){var o=I.rect(0,r,0,r,C),i=ke(t,t),l=ke(n,t);if(l>i){if(o.top=i,o.height=l-i,o.left+=2,o.width-=5,"function"==typeof a){var s=a(t,n);s&&(o.position="absolute",x=e(s).css(o).appendTo(C))}else o.isStart=!0,o.isEnd=!0,(x=e(ie({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",Q("dragOpacity"));x&&(we(x),C.append(x),b(x,o.width,!0),w(x,o.height,!0))}}}else Ce(t,n)}function ze(){ne(),x&&(x.remove(),x=null)}function Re(t){var n;1==t.which&&Q("selectable")&&(re(t),P.start((function(e,t){if(ze(),e&&e.col==t.col&&!Ee(e)){var a=Se(t),r=Se(e);xe((n=[a,a.clone().add(F),r,r.clone().add(F)].sort(E))[0],n[3])}else n=null}),t),e(document).one("mouseup",(function(e){P.stop(),n&&(+n[0]==+n[1]&&Ae(n[0],e),ae(n[0],n[3],e))})))}function Ae(e,t){J("dayClick",d[ce(e).col],e,t)}z(n.addClass("fc-agenda")),I=new me((function(t,n){var a,r,o;s.each((function(t,i){a=e(i),r=a.offset().left,t&&(o[1]=r),o=[r],n[t]=o})),o[1]=r+a.outerWidth(),Q("allDaySlot")&&(r=(a=_).offset().top,t[0]=[r,r+a.outerHeight()]);var i=C.offset().top,l=D.offset().top,c=l+D.outerHeight();function d(e){return Math.max(l,Math.min(c,e))}for(var u=0;u<j*W;u++)t.push([d(i+L*u),d(i+L*(u+1))])})),P=new he(I),B=new pe((function(e){return u.eq(e)})),V=new pe((function(e){return f.eq(e)}))}function ee(){var n=this;n.renderEvents=function(t,n){var o,i=t.length,l=[],c=[];for(o=0;o<i;o++)t[o].allDay?l.push(t[o]):c.push(t[o]);a("allDaySlot")&&($(l,n),s());!function(t,n){var o,i,l,s,c,u,v,p,g,y,b,w,C,E,S,k,M=t.length,z="",R=d(),A=a("isRTL");for(o=0;o<M;o++)l=(i=t[o]).event,s=f(i.start,i.start),c=f(i.end,i.start),u=m(i.col),v=h(i.col),g=(p=(v-=.025*(p=v-u))-u)*(i.forwardCoord-i.backwardCoord),a("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),A?y=(b=v-i.backwardCoord*p)-g:b=(y=u+i.backwardCoord*p)+g,y=Math.max(y,u),g=(b=Math.min(b,v))-y,i.top=s,i.left=y,i.outerWidth=g,i.outerHeight=c-s,z+=B(l,i);for(R[0].innerHTML=z,w=R.children(),o=0;o<M;o++)l=(i=t[o]).event,C=e(w[o]),!1===(E=r("eventRender",l,l,C))?C.remove():(E&&!0!==E&&(C.remove(),C=e(E).css({position:"absolute",top:i.top,left:i.left}).appendTo(R)),i.element=C,l._id===n?V(l,C,i):C[0]._fci=o,x(l,C));for(_(R,t,V),o=0;o<M;o++)(C=(i=t[o]).element)&&(i.vsides=T(C,!0),i.hsides=D(C,!0),(S=C.find(".fc-event-title")).length&&(i.contentTop=S[0].offsetTop));for(o=0;o<M;o++)(C=(i=t[o]).element)&&(C[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px",k=Math.max(0,i.outerHeight-i.vsides),C[0].style.height=k+"px",l=i.event,void 0!==i.contentTop&&k-i.contentTop<10&&(C.find("div.fc-event-time").text(Z(l.start,a("timeFormat"))+" - "+l.title),C.find("div.fc-event-title").remove()),r("eventAfterRender",l,l,C))}(function(e){var t,n,a,r,o,i=g(),l=F(),s=W(),c=[];for(n=0;n<i;n++)for(o=te(o=P(e,(t=p(0,n)).clone().time(l),t.clone().time(s))),a=0;a<o.length;a++)(r=o[a]).col=n,c.push(r);return c}(c),n)},n.clearEvents=function(){c().empty(),d().empty()},n.slotSegHtml=B,se.call(n);var a=n.opt,r=n.trigger,o=n.isEventDraggable,i=n.isEventResizable,l=n.eventElementHandlers,s=n.setHeight,c=n.getDaySegmentContainer,d=n.getSlotSegmentContainer,u=n.getHoverListener,f=n.computeDateTop,v=n.getIsCellAllDay,m=n.colContentLeft,h=n.colContentRight,p=n.cellToDate,g=n.getColCnt,y=n.getColWidth,b=n.getSnapHeight,C=n.getSnapDuration,E=n.getSlotHeight,S=n.getSlotDuration,k=n.getSlotContainer,x=n.reportEventElement,z=n.showEvents,R=n.hideEvents,N=n.eventDrop,H=n.eventResize,Y=n.renderDayOverlay,O=n.clearOverlays,$=n.renderDayEvents,F=n.getMinTime,W=n.getMaxTime,L=n.calendar,Z=L.formatDate,j=L.formatRange,I=L.getEventEnd;function P(e,t,n){t=t.clone().stripZone(),n=n.clone().stripZone();var a,r,o,i,l,s,c,d,u=[],f=e.length;for(a=0;a<f;a++)o=(r=e[a]).start.clone().stripZone(),(i=I(r).stripZone())>t&&o<n&&(o<t?(l=t.clone(),c=!1):(l=o,c=!0),i>n?(s=n.clone(),d=!1):(s=i,d=!0),u.push({event:r,start:l,end:s,isStart:c,isEnd:d}));return u.sort(ie)}function B(e,t){var n="<",r=e.url,l=A(e,a),s=["fc-event","fc-event-vert"];return o(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),n+=r?"a href='"+M(e.url)+"'":"div",n+=" class='"+s.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+l+"'><div class='fc-event-inner'><div class='fc-event-time'>",e.end?n+=M(j(e.start,e.end,a("timeFormat"))):n+=M(Z(e.start,a("timeFormat"))),n+="</div><div class='fc-event-title'>"+M(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&i(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function V(e,t,s){var c=t.find("div.fc-event-time");o(e)&&function(e,t,o){var i,l,s,c,d,u,f,m,h,_,w,D,T,E=n.getCoordinateGrid(),S=g(),k=y(),M=b(),x=C();function A(){O(),s&&(d?(o.hide(),t.draggable("option","grid",null),Y(D,T)):(H(),o.css("display",""),t.draggable("option","grid",[k,M])))}function H(){var t;D&&(t=e.end?j(D,T,a("timeFormat")):Z(D,a("timeFormat")),o.text(t))}t.draggable({scroll:!1,grid:[k,M],axis:1==S&&"y",opacity:a("dragOpacity"),revertDuration:a("dragRevertDuration"),start:function(n,a){r("eventDragStart",t,e,n,a),R(e,t),E.build(),i=t.position(),l=E.cell(n.pageX,n.pageY),s=c=!0,d=u=v(l),f=m=0,h=0,_=w=0,D=null,T=null},drag:function(n,a){var r=E.cell(n.pageX,n.pageY);if(s=!!r){if(d=v(r),(f=Math.round((a.position.left-i.left)/k))!=m){var o=p(0,l.col),g=l.col+f;g=Math.max(0,g),g=Math.min(S-1,g);var y=p(0,g);h=y.diff(o,"days")}d||(_=Math.round((a.position.top-i.top)/M))}s==c&&d==u&&f==m&&_==w||(d?(D=e.start.clone().stripTime().add(h,"days"),T=D.clone().add(L.defaultAllDayEventDuration)):(D=e.start.clone().add(_*x).add(h,"days"),T=I(e).add(_*x).add(h,"days")),A(),c=s,u=d,m=f,w=_),t.draggable("option","revert",!s)},stop:function(n,a){O(),r("eventDragStop",t,e,n,a),s&&(d||h||_)?N(this,e,D,n,a):(s=!0,d=!1,f=0,h=0,_=0,A(),t.css("filter",""),t.css(i),z(e,t))}})}(e,t,c),s.isEnd&&i(e)&&function(e,t,n){var o,i,l,s=b(),c=C();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(n,a){o=i=0,R(e,t),r("eventResizeStart",this,e,n,a)},resize:function(r,d){var u;(o=Math.round((Math.max(s,t.height())-d.originalSize.height)/s))!=i&&(l=I(e).add(c*o),u=o||e.end?j(e.start,l,a("timeFormat")):Z(e.start,a("timeFormat")),n.text(u),i=o)},stop:function(n,a){r("eventResizeStop",this,e,n,a),o?H(this,e,l,n,a):z(e,t)}})}(e,t,c),l(e,t)}n.draggableDayEvent=function(e,n,o){var i,l,s,c=o.isStart,d=!0,f=u(),v=y(),m=F(),h=S(),g=E(),_=C(),D=b();function T(){d||(n.width(i).height("").draggable("option","grid",null),d=!0)}n.draggable({opacity:a("dragOpacity","month"),revertDuration:a("dragRevertDuration"),start:function(t,a){r("eventDragStart",n,e,t,a),R(e,n),i=n.width(),f.start((function(t,a){if(O(),t){l=!1;var r=p(0,a.col),o=p(0,t.col);s=o.diff(r,"days"),t.row?c?d&&(n.width(v-10),w(n,L.defaultTimedEventDuration/h*g),n.draggable("option","grid",[v,1]),d=!1):l=!0:(Y(e.start.clone().add(s,"days"),I(e).add(s,"days")),T()),l=l||d&&!s}else T(),l=!0;n.draggable("option","revert",l)}),t,"drag")},stop:function(a,o){if(f.stop(),O(),r("eventDragStop",n,e,a,o),l)T(),n.css("filter",""),z(e,n);else{var i,c,u=e.start.clone().add(s,"days");d||(c=Math.round((n.offset().top-k().offset().top)/D),i=t.duration(m+c*_),u=L.rezoneDate(u.clone().time(i))),N(this,e,u,a,o)}}})}}function te(e){var t,n=function(e){var t,n,a,r=[];for(t=0;t<e.length;t++){for(n=e[t],a=0;a<r.length&&re(n,r[a]).length;a++);(r[a]||(r[a]=[])).push(n)}return r}(e),a=n[0];if(function(e){var t,n,a,r,o;for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)for((r=n[a]).forwardSegs=[],o=t+1;o<e.length;o++)re(r,e[o],r.forwardSegs)}(n),a){for(t=0;t<a.length;t++)ne(a[t]);for(t=0;t<a.length;t++)ae(a[t],0,0)}return function(e){var t,n,a,r=[];for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)r.push(n[a]);return r}(n)}function ne(e){var t,n,a=e.forwardSegs,r=0;if(void 0===e.forwardPressure){for(t=0;t<a.length;t++)ne(n=a[t]),r=Math.max(r,1+n.forwardPressure);e.forwardPressure=r}}function ae(e,t,n){var a,r=e.forwardSegs;if(void 0===e.forwardCoord)for(r.length?(r.sort(oe),ae(r[0],t+1,n),e.forwardCoord=r[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),a=0;a<r.length;a++)ae(r[a],0,e.forwardCoord)}function re(e,t,n){n=n||[];for(var a=0;a<t.length;a++)r=e,o=t[a],r.end>o.start&&r.start<o.end&&n.push(t[a]);var r,o;return n}function oe(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ie(e,t)}function ie(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function le(n,a,r){var o=this;o.element=n,o.calendar=a,o.name=r,o.opt=f,o.trigger=v,o.isEventDraggable=function(e){var t=e.source||{};return H(e.startEditable,t.startEditable,f("eventStartEditable"),e.editable,t.editable,f("editable"))},o.isEventResizable=function(e){var t=e.source||{};return H(e.durationEditable,t.durationEditable,f("eventDurationEditable"),e.editable,t.editable,f("editable"))},o.clearEventData=function(){l={},s=[]},o.reportEventElement=function(e,t){s.push({event:e,element:t}),l[e._id]?l[e._id].push(t):l[e._id]=[t]},o.triggerEventDestroy=function(){e.each(s,(function(e,t){o.trigger("eventDestroy",t.event,t.event,t.element)}))},o.eventElementHandlers=function(e,t){t.on("click",(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return v("eventClick",this,e,n)})).on("mouseenter",(function(t){v("eventMouseover",this,e,t)})).on("mouseleave",(function(t){v("eventMouseout",this,e,t)}))},o.showEvents=function(e,t){m(e,t,"show")},o.hideEvents=function(e,t){m(e,t,"hide")},o.eventDrop=function(e,t,n,r,o){var l=a.mutateEvent(t,n,null);v("eventDrop",e,t,(function(){l(),i(t._id)}),r,o),i(t._id)},o.eventResize=function(e,t,n,r,o){var l=a.mutateEvent(t,null,n);v("eventResize",e,t,(function(){l(),i(t._id)}),r,o),i(t._id)};var i=a.reportEventChange,l={},s=[],d=a.options,u=t.duration(d.nextDayThreshold);function f(t,n){var a=d[t];return e.isPlainObject(a)&&!c(t)?k(a,n||r):a}function v(e,t){return a.trigger.apply(a,[e,t||o].concat(Array.prototype.slice.call(arguments,2),[o]))}function m(e,t,n){var a,r=l[e._id],o=r.length;for(a=0;a<o;a++)t&&r[a][0]==t[0]||r[a][n]()}o.isHiddenDay=function(e){t.isMoment(e)&&(e=e.day());return g[e]},o.skipHiddenDays=function(e,t,n){var a=e.clone();t=t||1;for(;g[(a.day()+(n?t:0)+7)%7];)a.add(t,"days");return a},o.getCellsPerWeek=function(){return h},o.dateToCell=function(e){return S(E(C(e)))},o.dateToDayOffset=C,o.dayOffsetToCellOffset=E,o.cellOffsetToCell=S,o.cellToDate=function(){var e=w.apply(null,arguments);return T(D(e))},o.cellToCellOffset=w,o.cellOffsetToDayOffset=D,o.dayOffsetToDate=T,o.rangeToSegments=function(e,t){var n=o.getRowCnt(),a=o.getColCnt(),r=[],i=C(e),l=C(t),s=+t.time();s&&s>=u&&l++;l=Math.max(l,i+1);for(var c=E(i),d=E(l)-1,f=0;f<n;f++){var v=f*a,m=v+a-1,h=Math.max(c,v),p=Math.min(d,m);if(h<=p){var g=S(h),y=S(p),_=[g.col,y.col].sort(),b=D(h)==i,w=D(p)+1==l;r.push({row:f,leftCol:_[0],rightCol:_[1],isStart:b,isEnd:w})}}return r};var h,p=f("hiddenDays")||[],g=[],y=[],_=[],b=f("isRTL");function w(e,t){var n=o.getColCnt(),a=b?-1:1,r=b?n-1:0;return"object"==typeof e&&(t=e.col,e=e.row),e*n+(t*a+r)}function D(e){var t=o.start.day();return e+=y[t],7*Math.floor(e/h)+_[(e%h+h)%h]-t}function T(e){return o.start.clone().add(e,"days")}function C(e){return e.clone().stripTime().diff(o.start,"days")}function E(e){var t=o.start.day();return e+=t,Math.floor(e/7)*h+y[(e%7+7)%7]-y[t]}function S(e){var t=o.getColCnt(),n=b?-1:1,a=b?t-1:0;return{row:Math.floor(e/t),col:(e%t+t)%t*n+a}}!function(){!1===f("weekends")&&p.push(0,6);for(var t=0,n=0;t<7;t++)y[t]=n,g[t]=-1!=e.inArray(t,p),g[t]||(_[n]=t,n++);if(!(h=n))throw"invalid hiddenDays"}()}function se(){var t=this;t.renderDayEvents=function(e,t){var n=W(e,!1,!0);de(n,(function(e,t){i(e.event,t)})),function(e,t){var n=b();de(e,(function(e,n,a){var r=e.event;r._id===t?I(r,n,e):n[0]._fci=a})),_(n,e,I)}(n,t),de(n,(function(e,t){a("eventAfterRender",e.event,e.event,t)}))},t.draggableDayEvent=function(e,t){var r,o,i=E();t.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,l){a("eventDragStart",t,e,n,l),c(e,t),i.start((function(n,a,i,l){if(t.draggable("option","revert",!n||!i&&!l),T(),n){var s=x(a),c=x(n);r=c.diff(s,"days"),o=e.start.clone().add(r,"days"),w(o,$(e).add(r,"days"))}else r=0}),n,"drag")},stop:function(n,l){i.stop(),T(),a("eventDragStop",t,e,n,l),r?d(this,e,o,n,l):(t.css("filter",""),s(e,t))}})},t.resizableDayEvent=function(t,r,o){var i=n("isRTL")?"w":"e",l=r.find(".ui-resizable-"+i),d=!1;z(r),r.on("mousedown",(function(e){e.preventDefault()})).on("click",(function(e){d&&(e.preventDefault(),e.stopImmediatePropagation())})),l.on("mousedown",(function(n){if(1==n.which){d=!0;var l,f,v,m=E(),h=r.css("top"),p=e.extend({},t),g=Y(H(t.start));C(),e("body").css("cursor",i+"-resize").one("mouseup",(function(n){a("eventResizeStop",this,t,n),e("body").css("cursor",""),m.stop(),T(),l&&u(this,t,f,n);setTimeout((function(){d=!1}),0)})),a("eventResizeStart",this,t,n),m.start((function(n,a){if(n){var r=R(a),d=R(n);if(d=Math.max(d,g),l=N(d)-N(r),f=$(t).add(l,"days"),l){p.end=f;var u=v;v=function(e,t,n){var a=W([e],!0,!1),r=[];return de(a,(function(e,a){e.row===t&&a.css("top",n),r.push(a[0])})),r}(p,o.row,h),(v=e(v)).find("*").css("cursor",i+"-resize"),u&&u.remove(),c(t)}else v&&(s(t),v.remove(),v=null);T(),w(t.start,f)}}),n)}}))};var n=t.opt,a=t.trigger,r=t.isEventDraggable,o=t.isEventResizable,i=t.reportEventElement,l=t.eventElementHandlers,s=t.showEvents,c=t.hideEvents,d=t.eventDrop,u=t.eventResize,f=t.getRowCnt,v=t.getColCnt,m=t.allDayRow,h=t.colLeft,p=t.colRight,g=t.colContentLeft,y=t.colContentRight,b=t.getDaySegmentContainer,w=t.renderDayOverlay,T=t.clearOverlays,C=t.clearSelection,E=t.getHoverListener,k=t.rangeToSegments,x=t.cellToDate,R=t.cellToCellOffset,N=t.cellOffsetToDayOffset,H=t.dateToDayOffset,Y=t.dayOffsetToCellOffset,O=t.calendar,$=O.getEventEnd,F=O.formatDate;function W(t,r,o){var i,l,s=b(),c=r?e("<div/>"):s,d=function(e){for(var t=[],n=0;n<e.length;n++){var a=L(e[n]);t.push.apply(t,a)}return t}(t);return function(e){for(var t=n("isRTL"),a=0;a<e.length;a++){var r=e[a],o=(t?r.isEnd:r.isStart)?g:h,i=(t?r.isStart:r.isEnd)?y:p,l=o(r.leftCol),s=i(r.rightCol);r.left=l,r.outerWidth=s-l}}(d),i=function(e){for(var t="",n=0;n<e.length;n++)t+=Z(e[n]);return t}(d),c[0].innerHTML=i,l=c.children(),r&&s.append(l),function(t,n){for(var r=0;r<t.length;r++){var o=t[r],i=o.event,l=n.eq(r),s=a("eventRender",i,i,l);!1===s?l.remove():(s&&!0!==s&&(s=e(s).css({position:"absolute",left:o.left}),l.replaceWith(s),l=s),o.element=l)}}(d,l),de(d,(function(e,t){e.hsides=D(t,!0)})),de(d,(function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))})),de(d,(function(e,t){e.outerHeight=t.outerHeight(!0)})),function(e,t){var n,a=function(e){for(var t,n=f(),a=v(),r=[],o=function(e){var t,n,a,r=f(),o=[];for(t=0;t<e.length;t++)a=(n=e[t]).row,n.element&&(o[a]?o[a].push(n):o[a]=[n]);for(a=0;a<r;a++)o[a]=j(o[a]||[]);return o}(e),i=0;i<n;i++){var l=o[i],s=[];for(t=0;t<a;t++)s.push(0);for(var c=0;c<l.length;c++){var d=l[c];for(d.top=S(s.slice(d.leftCol,d.rightCol+1)),t=d.leftCol;t<=d.rightCol;t++)s[t]=d.top+d.outerHeight}r.push(S(s))}return r}(e),r=function(){var e,t=f(),n=[];for(e=0;e<t;e++)n[e]=m(e).find("div.fc-day-content > div");return n}(),o=[];if(t)for(n=0;n<r.length;n++)r[n].height(a[n]);for(n=0;n<r.length;n++)o.push(r[n].position().top);de(e,(function(e,t){t.css("top",o[e.row]+e.top)}))}(d,o),d}function L(e){for(var t=k(e.start,$(e)),n=0;n<t.length;n++)t[n].event=e;return t}function Z(e){var t="",a=n("isRTL"),i=e.event,l=i.url,s=["fc-event","fc-event-hori"];r(i)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(i.className),i.source&&(s=s.concat(i.source.className||[]));var c=A(i,n);return t+=l?"<a href='"+M(l)+"'":"<div",t+=" class='"+s.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+c+"'><div class='fc-event-inner'>",!i.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+M(F(i.start,n("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+M(i.title||"")+"</span></div>",i.allDay&&e.isEnd&&o(i)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(a?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(l?"a":"div")+">"}function j(e){for(var t=[],n=function(e){e.sort(ue);for(var t=[],n=0;n<e.length;n++){for(var a=e[n],r=0;r<t.length&&ce(a,t[r]);r++);t[r]?t[r].push(a):t[r]=[a]}return t}(e),a=0;a<n.length;a++)t.push.apply(t,n[a]);return t}function I(e,n,a){r(e)&&t.draggableDayEvent(e,n,a),e.allDay&&a.isEnd&&o(e)&&t.resizableDayEvent(e,n,a),l(e,n)}}function ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.leftCol<=e.rightCol&&a.rightCol>=e.leftCol)return!0}return!1}function de(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.element;r&&t(a,r,n)}}function ue(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function fe(){var t=this;t.select=function(e,t){c(),e=n.moment(e),t=t?n.moment(t):o(e);i(e,t),d(e,t)},t.unselect=c,t.reportSelection=d,t.daySelectionMousedown=function(n){var r=t.cellToDate,o=t.getIsCellAllDay,s=t.getHoverListener(),u=t.reportDayClick;if(1==n.which&&a("selectable")){var f;c(n),s.start((function(e,t){l(),e&&o(e)?(f=[r(t),r(e)].sort(E),i(f[0],f[1].clone().add(1,"days"))):f=null}),n),e(document).one("mouseup",(function(e){s.stop(),f&&(+f[0]==+f[1]&&u(f[0],e),d(f[0],f[1].clone().add(1,"days"),e))}))}};var n=t.calendar,a=t.opt,r=t.trigger,o=t.defaultSelectionEnd,i=t.renderSelection,l=t.clearSelection,s=!1;function c(e){s&&(s=!1,l(),r("unselect",null,e))}function d(e,t,n){s=!0,r("select",null,e,t,n)}a("selectable")&&a("unselectAuto")&&e(document).mousedown((function(t){var n=a("unselectCancel");n&&e(t.target).parents(n).length||c(t)}))}function ve(){this.renderOverlay=function(a,r){var o=n.shift();o||(o=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=r[0]&&o.appendTo(r);return t.push(o.css(a).show()),o},this.clearOverlays=function(){var e;for(;e=t.shift();)n.push(e.hide().off())};var t=[],n=[]}function me(e){var t,n,a=this;a.build=function(){e(t=[],n=[])},a.cell=function(e,a){var r,o=t.length,i=n.length,l=-1,s=-1;for(r=0;r<o;r++)if(a>=t[r][0]&&a<t[r][1]){l=r;break}for(r=0;r<i;r++)if(e>=n[r][0]&&e<n[r][1]){s=r;break}return l>=0&&s>=0?{row:l,col:s}:null},a.rect=function(e,a,r,o,i){var l=i.offset();return{top:t[e][0]-l.top,left:n[a][0]-l.left,width:n[o][1]-n[a][0],height:t[r][1]-t[e][0]}}}function he(t){var n,a,r,o;function i(e){var n;void 0===(n=e).pageX&&(n.pageX=n.originalEvent.pageX,n.pageY=n.originalEvent.pageY);var i=t.cell(e.pageX,e.pageY);(Boolean(i)!==Boolean(o)||i&&(i.row!=o.row||i.col!=o.col))&&(i?(r||(r=i),a(i,r,i.row-r.row,i.col-r.col)):a(i,r),o=i)}this.start=function(l,s,c){a=l,r=o=null,t.build(),i(s),n=c||"mousemove",e(document).on(n,i)},this.stop=function(){return e(document).off(n,i),o}}function pe(e){var t=this,n={},a={},r={};function o(t){return n[t]=n[t]||e(t)}t.left=function(e){return a[e]=void 0===a[e]?o(e).position().left:a[e]},t.right=function(e){return r[e]=void 0===r[e]?t.left(e)+o(e).width():r[e]},t.clear=function(){n={},a={},r={}}}i.month=function(e,t){var n=this;n.incrementDate=function(e,t){return e.clone().stripTime().add(t,"months").startOf("month")},n.render=function(e){n.intervalStart=e.clone().stripTime().startOf("month"),n.intervalEnd=n.intervalStart.clone().add(1,"months"),n.start=n.intervalStart.clone().startOf("week"),n.start=n.skipHiddenDays(n.start),n.end=n.intervalEnd.clone().add((7-n.intervalEnd.weekday())%7,"days"),n.end=n.skipHiddenDays(n.end,-1,!0);var a=Math.ceil(n.end.diff(n.start,"weeks",!0));"fixed"==n.opt("weekMode")&&(n.end.add(6-a,"weeks"),a=6),n.title=t.formatDate(n.intervalStart,n.opt("titleFormat")),n.renderBasic(a,n.getCellsPerWeek(),!0)},G.call(n,e,t,"month")},i.basicWeek=function(e,t){var n=this;n.incrementDate=function(e,t){return e.clone().stripTime().add(t,"weeks").startOf("week")},n.render=function(e){n.intervalStart=e.clone().stripTime().startOf("week"),n.intervalEnd=n.intervalStart.clone().add(1,"weeks"),n.start=n.skipHiddenDays(n.intervalStart),n.end=n.skipHiddenDays(n.intervalEnd,-1,!0),n.title=t.formatRange(n.start,n.end.clone().subtract(1),n.opt("titleFormat"),"  "),n.renderBasic(1,n.getCellsPerWeek(),!1)},G.call(n,e,t,"basicWeek")},i.basicDay=function(e,t){var n=this;n.incrementDate=function(e,t){var a=e.clone().stripTime().add(t,"days");return n.skipHiddenDays(a,t<0?-1:1)},n.render=function(e){n.start=n.intervalStart=e.clone().stripTime(),n.end=n.intervalEnd=n.start.clone().add(1,"days"),n.title=t.formatDate(n.start,n.opt("titleFormat")),n.renderBasic(1,1,!1)},G.call(n,e,t,"basicDay")},l({weekMode:"fixed"}),i.agendaWeek=function(e,t){var n=this;n.incrementDate=function(e,t){return e.clone().stripTime().add(t,"weeks").startOf("week")},n.render=function(e){n.intervalStart=e.clone().stripTime().startOf("week"),n.intervalEnd=n.intervalStart.clone().add(1,"weeks"),n.start=n.skipHiddenDays(n.intervalStart),n.end=n.skipHiddenDays(n.intervalEnd,-1,!0),n.title=t.formatRange(n.start,n.end.clone().subtract(1),n.opt("titleFormat"),"  "),n.renderAgenda(n.getCellsPerWeek())},J.call(n,e,t,"agendaWeek")},i.agendaDay=function(e,t){var n=this;n.incrementDate=function(e,t){var a=e.clone().stripTime().add(t,"days");return n.skipHiddenDays(a,t<0?-1:1)},n.render=function(e){n.start=n.intervalStart=e.clone().stripTime(),n.end=n.intervalEnd=n.start.clone().add(1,"days"),n.title=t.formatDate(n.start,n.opt("titleFormat")),n.renderAgenda(1)},J.call(n,e,t,"agendaDay")},l({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:function(e,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},timeFormat:{agenda:function(e,t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},dragOpacity:{agenda:.5},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0})})),window.initDashboardCalendar=function(){calendarTool.initDashboardCalendar()};var fc_ready=!1;window.initCalendarTool=function(){responsiveCalendar();$(".melis-draggable-input").draggable({zIndex:999,revert:!0,revertDuration:0,start:function(){"undefined"!=typeof mainYScroller&&mainYScroller.disable()},stop:function(){"undefined"!=typeof mainYScroller&&mainYScroller.enable()}}),$(".melis-draggable-input").on("click",(function(){$(this).trigger("focus")})),$("#calendar-tool").fullCalendar({header:{left:"prev,next today",center:"title"},buttonText:{today:translations.tr_melistoolcalendar_fullcalendar_today,month:"month",week:"week",day:"day"},monthNames:[translations.tr_melistoolcalendar_fullcalendar_jan,translations.tr_melistoolcalendar_fullcalendar_feb,translations.tr_melistoolcalendar_fullcalendar_mar,translations.tr_melistoolcalendar_fullcalendar_apr,translations.tr_melistoolcalendar_fullcalendar_may,translations.tr_melistoolcalendar_fullcalendar_jun,translations.tr_melistoolcalendar_fullcalendar_jul,translations.tr_melistoolcalendar_fullcalendar_aug,translations.tr_melistoolcalendar_fullcalendar_sep,translations.tr_melistoolcalendar_fullcalendar_oct,translations.tr_melistoolcalendar_fullcalendar_nov,translations.tr_melistoolcalendar_fullcalendar_dec],dayNamesShort:[translations.tr_melistoolcalendar_fullcalendar_sun,translations.tr_melistoolcalendar_fullcalendar_mon,translations.tr_melistoolcalendar_fullcalendar_tue,translations.tr_melistoolcalendar_fullcalendar_wed,translations.tr_melistoolcalendar_fullcalendar_thu,translations.tr_melistoolcalendar_fullcalendar_fri,translations.tr_melistoolcalendar_fullcalendar_sat],editable:!0,droppable:!0,titleFormat:{day:"YYYY-MM-DD"},events:"/melis/MelisCalendar/ToolCalendar/retrieveCalendarEvents",drop:function(e,t){var n=new Array;n.push({name:"cal_event_title",value:$("#newCalendarEventInt").val()}),n.push({name:"cal_date_start",value:moment(e,"DD.MM.YYYY").format("yyyy-MM-dd")}),n=$.param(n),$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/saveEvent",data:n,dataType:"json",encode:!0}).done((function(e){if(e.success){if(null!==e.event){var t=e.event,n={id:t.id,title:t.id+" : "+t.title,start:t.start,end:t.end},a=$.extend({},n);$("#calendar-tool").fullCalendar("renderEvent",a,!0),$("#newCalendarEventInt").val(""),melisHelper.zoneReload("id_melistoolcalendar_tool_recent_added","melistoolcalendar_tool_recent_added"),melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisCore.flashMessenger()}}else melisCoreTool.alertDanger("#siteaddalert","",e.textMessage),melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors)})).fail((function(){alert(translations.tr_meliscore_error_message)}))},eventRender:function(e,t){t.append("<span class='event-icon'><i class='fa fa-pencil-square-o update-event' data-id='"+e._id+"'></i><i class='fa fa-trash-o delete-event' data-id='"+e._id+"'></i></span>")},eventResize:function(e){calendarTool.reschedEvent(e)},eventDrop:function(e){calendarTool.reschedEvent(e)},eventAfterAllRender:function(e){calendarTool.gotoFCdate(),fc_ready=!0},loading:function(){fc_ready=!0}})};var fcal_year_client_event=null,fcal_month_client_event=null,calendarTool={getCalendarData:function(){initCalendarTool()},reschedEvent:function(e){e.id;var t=$.fullCalendar.formatDate(e.start,"yyyy-MM-dd"),n=$.fullCalendar.formatDate(e.end,"yyyy-MM-dd"),a=new Array;a.push({name:"cal_id",value:e.id}),a.push({name:"cal_date_start",value:t}),a.push({name:"cal_date_end",value:n}),a=$.param(a),$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/reschedEvent",data:a,dataType:"json",encode:!0}).done((function(e){e.success?(melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisCore.flashMessenger()):(melisCoreTool.alertDanger("#siteaddalert","",e.textMessage),melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors))})).fail((function(){alert(translations.tr_meliscore_error_message)}))},deleteEvent:function(e){melisCoreTool.confirm(translations.tr_melistoolcalendar_delete_event_btn_yes,translations.tr_melistoolcalendar_delete_event_btn_no,translations.tr_melistoolcalendar_delete_event_title,translations.tr_melistoolcalendar_delete_event_confirm,(function(){$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/deleteEvent",data:{cal_id:e},dataType:"json",encode:!0}).done((function(t){t.success?($("#calendar-tool").fullCalendar("removeEvents",e),melisHelper.melisOkNotification(t.textTitle,t.textMessage),melisCore.flashMessenger(),melisHelper.zoneReload("id_melistoolcalendar_tool_recent_added","melistoolcalendar_tool_recent_added")):(melisCoreTool.alertDanger("#siteaddalert","",t.textMessage),melisHelper.melisKoNotification(t.textTitle,t.textMessage,t.errors))})).fail((function(){alert(translations.tr_meliscore_error_message)}))}))},editEventTitle:function(e){calVal_eventId=e,calVal_id="id_meliscalendar_tool_edit_event_modal",calVal_melisKey="meliscalendar_tool_edit_event_modal",modalUrl="/melis/MelisCalendar/Calendar/renderCalendarModal",melisHelper.createModal(calVal_id,calVal_melisKey,!1,{cal_id:e},modalUrl)},saveEventTitle:function(){var e=new Array;e.push({name:"cal_id",value:calVal_eventId});var t=$("body #"+calVal_id+" #newCalendarEventInt").val();e.push({name:"cal_event_title",value:t}),e=$.param(e),$.ajax({type:"POST",url:"/melis/MelisCalendar/ToolCalendar/saveEvent",data:e,dataType:"json",encode:!0}).done((function(e){if(e.success){var n=$("#calendar-tool").fullCalendar("clientEvents",calVal_eventId)[0],a=calVal_eventId+" : "+t;n.title=a,$("#calendar-tool").fullCalendar("updateEvent",n),$("#"+calVal_id+"_container").modal("hide"),melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisCore.flashMessenger()}else melisCoreTool.alertDanger("#siteaddalert","",e.textMessage),melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors)})).fail((function(){alert(translations.tr_meliscore_error_message)}))},gotoFCdate:function(){null!=fcal_year_client_event&&null!=fcal_month_client_event&&($("#calendar-tool").fullCalendar("gotoDate",fcal_year_client_event,fcal_month_client_event),fcal_year_client_event=null,fcal_month_client_event=null)},initDashboardCalendar:function(){var e=new Array;$.ajax({url:"/melis/MelisCalendar/ToolCalendar/retrieveDashboardCalendarEvents",dataType:"json",encode:!0}).done((function(t){$.each(t,(function(){e.push(String(this.dates))})),$(".dashbaorad-calendar-tool").datepicker({format:"yyyy-mm-dd",inline:!0,showOtherMonths:!0,todayHighlight:!0,toggleActive:!0,beforeShowDay:function(t){var n=t,a=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2),o=n.getFullYear()+"-"+r+"-"+a;if(-1!=$.inArray(o,e))return{classes:"calendar-highlight calendar-event"}}}).on("changeDate",(function(t){var n=t.format("yyyy-mm-dd");-1!=$.inArray(n,e)&&($("#id_meliscore_menu_toolstree li[data-tool-id='id_meliscalendar_tool']").trigger("click"),$("#id_meliscalendar_tool").length&&(fcal_year_client_event=parseInt(t.format("yyyy")),fcal_month_client_event=parseInt(t.format("m"))-1,fc_ready&&melisHelper.zoneReload("id_melistoolcalendar_tool_calendar_content","melistoolcalendar_tool_calendar_content")))}))})).fail((function(){alert(translations.tr_meliscore_error_message)}))}};$((function(){var e=$("body");initDashboardCalendar(),e.on("click",".delete-event",(function(e){var t=$(this);calendarTool.deleteEvent(t.data("id"))})),e.on("click",".update-event",(function(e){var t=$(this);calendarTool.editEventTitle(t.data("id"))})),e.on("click",".btnSaveEventTitle",(function(e){var t=$(this);calendarTool.saveEventTitle(t.data("id"))})),e.on("keyup keypress","#idformcalendar",(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}))})),$(window).on("resize",(function(){responsiveCalendar()}));
